{"id": "MOD-0rndkpc314", "mod_id": "MOD-0rndkpc314", "type": "module", "name": "MarketSale On-Chain Policy", "description": "On-chain policy enforcement for the MarketSale delegate. Governs creation, configuration, lifecycle transitions, token selling, and retirement of market sales through validated spending, minting, and burning activities. The policy enforces state machine integrity, data validation, dynamic pricing correctness, and VXF protocol compliance — all on-chain, all immutable once deployed.", "essential_techs": ["Helios", "Cardano eUTxO", "stellar-contracts on-chain framework"], "related_techs": ["DynamicSaleV1 pricing model", "VXF Protocol", "stellar-contracts delegation pattern"], "expected_users": "MarketSale off-chain controller (transaction builders), test suites, future UI components", "background": "Market sales enable the distribution of token bundles in discrete lots over a specified time period, using an adaptive pricing model that responds to market dynamics. The on-chain policy is the ultimate authority — it enforces all business rules that the off-chain code proposes. Key challenges include:\n\n1. **State machine integrity**: Sales transition through Pending → Active ⇄ Paused, with Paused → Retired/SoldOut, with each transition requiring specific preconditions and authority.\n2. **Data consistency**: Sale assets, lot counts, pricing parameters, and progress details must remain consistent across all mutations.\n3. **Dynamic pricing**: A real-time pricing model adjusts based on sale progress and buying pace, requiring on-chain validation of pricing calculations.\n4. **VXF Protocol**: Funds and tokens must be routed to validated destinations, enforced during sale transactions.\n5. **Chunk splitting**: Sales can be split into concurrent chunks for throughput scaling, requiring coordinated state across parent and child records.", "design_goals": "**General Approach**\n\n- Policy-as-law: the on-chain validator is the single source of truth for what mutations are legal\n- Activity-based dispatch: each mutation type (SpendingActivity, MintingActivity, BurningActivity) has its own validation path\n- REQT traceability: on-chain assertions use REQT() macros for diagnostic output that maps to requirements\n\n**Specific Goals**\n\n1. **Correct state transitions**: Only valid lifecycle transitions are permitted, with appropriate authority checks.\n2. **Data integrity across mutations**: Frozen fields stay frozen, editable fields are validated within bounds.\n3. **Pricing honesty**: Dynamic pricing calculations are verified on-chain so buyers pay the correct price.\n4. **VXF compliance**: Token and fund routing follows the VXF protocol, ensuring custodial assurances.\n5. **Extensible activity model**: New activities (Stopping, Resuming, UpdatingPausedSale) can be added without restructuring existing validation.", "maturity": {"status": "draft"}}
{"id": "MOD:area-fa7sg1smz5", "mod_id": "MOD-0rndkpc314", "type": "functional-area", "name": "Sale Creation", "description": "Governs the minting of new MarketSale records with correct initial state, validated data, and identity constraints.", "order": 1, "added_in": "1.0", "maturity": {"status": "draft"}, "area_id": "MOD:area-fa7sg1smz5"}
{"id": "MOD:area-x4jj6hp9z7", "mod_id": "MOD-0rndkpc314", "type": "functional-area", "name": "Data Integrity & Shared Validation", "description": "Cross-cutting validation rules that apply across multiple activities: record-level validate(), name constraints, saleAssets consistency, and lot-count divisibility. Referenced by Creation, UpdatingPendingSale, AddTokens, Activating, and future activities.", "order": 2, "added_in": "1.0", "maturity": {"status": "draft"}, "area_id": "MOD:area-x4jj6hp9z7"}
{"id": "MOD:area-5fw788jm0m", "mod_id": "MOD-0rndkpc314", "type": "functional-area", "name": "Sale Lifecycle", "description": "Defines the valid states and transitions for a MarketSale record. The state machine is the backbone — every spending activity must respect it.", "order": 3, "added_in": "1.0", "maturity": {"status": "draft"}, "area_id": "MOD:area-5fw788jm0m"}
{"id": "MOD:area-sh8j16739s", "mod_id": "MOD-0rndkpc314", "type": "functional-area", "name": "Token Management", "description": "Governs the AddingToSale activity: depositing tokens into a Pending sale while enforcing even lot distribution and asset consistency.", "order": 4, "added_in": "1.0", "maturity": {"status": "draft"}, "area_id": "MOD:area-sh8j16739s"}
{"id": "MOD:area-g4w6yxg5gz", "mod_id": "MOD-0rndkpc314", "type": "functional-area", "name": "Pending Sale Configuration", "description": "Governs the UpdatingPendingSale activity: modifying sale details while in Pending state, with strict immutability on identity, state, and progress fields.", "order": 5, "added_in": "1.0", "maturity": {"status": "draft"}, "area_id": "MOD:area-g4w6yxg5gz"}
{"id": "MOD:area-h8xgj93adg", "mod_id": "MOD-0rndkpc314", "type": "functional-area", "name": "VXF Protocol Integration", "description": "Governs how the MarketSale participates in the VXF protocol for routing funds and tokens to validated destinations. Covers destination sealing, validation during state transitions, and enforcement during sales.", "order": 6, "added_in": "1.0", "maturity": {"status": "draft"}, "area_id": "MOD:area-h8xgj93adg"}
{"id": "MOD:area-p0zsm8zca8", "mod_id": "MOD-0rndkpc314", "type": "functional-area", "name": "Activation", "description": "Governs the Activating activity: transitioning a fully-configured Pending sale to Active, with token deposit verification, VXF validation, and authority checks.", "order": 7, "added_in": "1.0", "maturity": {"status": "draft"}, "area_id": "MOD:area-p0zsm8zca8"}
{"id": "MOD:area-m4actb5psx", "mod_id": "MOD-0rndkpc314", "type": "functional-area", "name": "Sale Progress & Dynamic Pricing", "description": "Governs progress tracking (lotsSold, timestamps, pace) and the DynamicSaleV1 pricing model (progress discounts, dynamic pace, price floors). Referenced by SellingTokens and relevant to UpdatingPausedSale (settings are editable while paused).", "order": 8, "added_in": "1.0", "maturity": {"status": "draft"}, "area_id": "MOD:area-m4actb5psx"}
{"id": "MOD:area-gxhv1xyf6c", "mod_id": "MOD-0rndkpc314", "type": "functional-area", "name": "Token Selling", "description": "Governs the SellingTokens activity: executing token purchases from an Active sale with correct pricing, progress updates, payment verification, and state constraints.", "order": 9, "added_in": "1.0", "maturity": {"status": "draft"}, "area_id": "MOD:area-gxhv1xyf6c"}
{"id": "MOD:area-avths4ptbg", "mod_id": "MOD-0rndkpc314", "type": "functional-area", "name": "Paused Sale Management", "description": "Governs the Stopping, Resuming, and UpdatingPausedSale activities: temporarily halting an Active sale, modifying configuration while paused, and re-launching. Includes frozen/editable field inventory for paused edits.", "order": 10, "added_in": "2.0", "maturity": {"status": "draft"}, "area_id": "MOD:area-avths4ptbg"}
{"id": "MOD:area-qmwgk20pp6", "mod_id": "MOD-0rndkpc314", "type": "functional-area", "name": "Sale Retirement", "description": "Governs the Retiring activity: permanently winding down a Paused sale, including token withdrawal/burning and transition to Retired state.", "order": 11, "added_in": "2.0", "maturity": {"status": "draft"}, "area_id": "MOD:area-qmwgk20pp6"}
{"id": "MOD:area-cg50k1920c", "mod_id": "MOD-0rndkpc314", "type": "functional-area", "name": "Chunk Splitting & Scaling", "description": "Governs splitting sales into concurrent chunks for throughput scaling: minting child chunks, merging them back, and coordinating state between parent and child records.", "order": 12, "added_in": "1.0", "maturity": {"status": "draft"}, "area_id": "MOD:area-cg50k1920c"}
{"id": "MOD:file-zj4fsgpqy3", "file_id": "MOD:file-zj4fsgpqy3", "mod_id": "MOD-0rndkpc314", "type": "file", "path": "./MarketSaleData.hl", "description": "Data types, enums (MarketSaleState, MktSaleDetails), validation functions (validate, validateDetailsWhenPending, validateUpdatePendingSale, validateActivating, validateAdding)", "added_in": "1.0", "maturity": {"status": "draft"}}
{"id": "MOD:file-a9z14m22vt", "file_id": "MOD:file-a9z14m22vt", "mod_id": "MOD-0rndkpc314", "type": "file", "path": "./MarketSalePolicy.hl", "description": "Policy script: activity enums (SpendingActivity, MintingActivity, BurningActivity), additionalDelegateValidation dispatch, per-activity validation logic", "added_in": "1.0", "maturity": {"status": "draft"}}
{"id": "MOD:skill-b1jmqqn7cr", "skill_id": "MOD:skill-b1jmqqn7cr", "mod_id": "MOD-0rndkpc314", "type": "special-skill", "trigger_condition": "When implementing or modifying on-chain validation logic", "resource_path": "../stellar-contracts/reference/essential-stellar-onchain.md", "focus_area": "Helios language patterns, stellar-contracts on-chain framework conventions, REQT traceability macros", "added_in": "1.0", "maturity": {"status": "draft"}}
{"id": "MOD:skill-c9rntmrt2e", "skill_id": "MOD:skill-c9rntmrt2e", "mod_id": "MOD-0rndkpc314", "type": "special-skill", "trigger_condition": "When working with DynamicSaleV1 pricing calculations or settings validation", "resource_path": "./DynamicSaleV1.hl", "focus_area": "Pricing model: progress discounts, dynamic pace, idle decay, price floors/ceilings", "added_in": "1.0", "maturity": {"status": "draft"}}
{"id": "MOD:skill-ekhasw6fth", "skill_id": "MOD:skill-ekhasw6fth", "mod_id": "MOD-0rndkpc314", "type": "special-skill", "trigger_condition": "When working with VxfDestination validation or VXF protocol compliance", "resource_path": "../VxfProtocol/", "focus_area": "VXF destination sealing, receiver participation, validation rules", "added_in": "1.0", "maturity": {"status": "draft"}}
{"id": "REQT-g2g1x60wpk", "reqt_id": "REQT-g2g1x60wpk", "mod_id": "MOD-0rndkpc314", "type": "requirement", "outline": "1.0", "title": "Sale Creation", "purpose": "Governs how new MarketSale records are minted. Applied when reviewing or modifying the CreatingRecord minting activity, or when evaluating what constraints apply to newly-created sale data.", "functional": "When a new sale is created, it arrives with validated initial state, correct identity, and only the primary asset in the lot bundle — ready for token deposits and configuration", "impl_status": "COMPLETED", "added_in": "1.0", "maturity": {"status": "consented"}, "area_id": "MOD:area-fa7sg1smz5"}
{"id": "REQT-4zd4jczf3c", "reqt_id": "REQT-4zd4jczf3c", "mod_id": "MOD-0rndkpc314", "type": "requirement", "outline": "1.1.0", "title": "CreatingRecord Activity", "purpose": "Specifies the on-chain validation for the CreatingRecord minting activity. Applied when implementing or testing sale creation.", "parent_reqt": "REQT-g2g1x60wpk", "impl_status": "COMPLETED", "added_in": "1.0", "maturity": {"status": "consented"}, "area_id": "MOD:area-fa7sg1smz5"}
{"id": "REQT-0m7sg0e84d", "reqt_id": "REQT-0m7sg0e84d", "mod_id": "MOD-0rndkpc314", "type": "requirement", "outline": "1.1.1", "title": "Charter Reference", "statement": "CreatingRecord MUST require a charter reference (`cctx.withCharterRef()`).", "parent_reqt": "REQT-4zd4jczf3c", "impl_status": "COMPLETED", "added_in": "1.0", "maturity": {"status": "consented"}, "area_id": "MOD:area-fa7sg1smz5"}
{"id": "REQT-y1nj4z3jhg", "reqt_id": "REQT-y1nj4z3jhg", "mod_id": "MOD-0rndkpc314", "type": "requirement", "outline": "1.1.2", "title": "Gov Authority", "statement": "CreatingRecord MUST require governance authority.", "parent_reqt": "REQT-4zd4jczf3c", "impl_status": "COMPLETED", "added_in": "1.0", "maturity": {"status": "consented"}, "area_id": "MOD:area-fa7sg1smz5"}
{"id": "REQT-fqgxgcj2jj", "reqt_id": "REQT-fqgxgcj2jj", "mod_id": "MOD-0rndkpc314", "type": "requirement", "outline": "1.1.3", "title": "Pending State Validation", "statement": "The created record MUST pass `validateDetailsWhenPending()`, ensuring initial state is Pending with correctly initialized progress details, thread info, and settings.", "parent_reqt": "REQT-4zd4jczf3c", "impl_status": "COMPLETED", "added_in": "1.0", "needs": ["REQT-bw488gep8m"], "maturity": {"status": "consented"}, "area_id": "MOD:area-fa7sg1smz5"}
{"id": "REQT-9703xjhdxg", "reqt_id": "REQT-9703xjhdxg", "mod_id": "MOD-0rndkpc314", "type": "requirement", "outline": "1.1.4", "title": "Primary Asset Only on Creation", "statement": "The created record's `saleLotAssets` MUST contain only the primary asset — no other tokens may be included at creation time.", "parent_reqt": "REQT-4zd4jczf3c", "impl_status": "COMPLETED", "added_in": "1.0", "maturity": {"status": "consented"}, "area_id": "MOD:area-fa7sg1smz5"}
{"id": "REQT-638fe24d5f", "reqt_id": "REQT-638fe24d5f", "mod_id": "MOD-0rndkpc314", "type": "requirement", "outline": "1.2.0", "title": "Initial Sale Details", "purpose": "Specifies what a correctly-created sale record contains. Applied when verifying creation output or writing creation tests.", "functional": "A newly created sale has expected labels, initial timestamps, price/lot configuration, and the primary asset details", "parent_reqt": "REQT-g2g1x60wpk", "impl_status": "COMPLETED", "added_in": "1.0", "maturity": {"status": "consented"}, "area_id": "MOD:area-fa7sg1smz5"}
{"id": "REQT-kxafp5yvt0", "reqt_id": "REQT-kxafp5yvt0", "mod_id": "MOD-0rndkpc314", "type": "requirement", "outline": "1.2.1", "title": "Identity and Labels", "statement": "A created sale MUST have a unique id (derived from seed UUT), type 'mktSale', and a name of at least 10 characters.", "parent_reqt": "REQT-638fe24d5f", "impl_status": "COMPLETED", "added_in": "1.0", "needs": ["REQT-y16j4t955c"], "maturity": {"status": "consented"}, "area_id": "MOD:area-fa7sg1smz5"}
{"id": "REQT-wrea872w6n", "reqt_id": "REQT-wrea872w6n", "mod_id": "MOD-0rndkpc314", "type": "requirement", "outline": "1.2.2", "title": "Initial Timestamps", "statement": "A created sale MUST have `lastPurchaseAt` and `prevPurchaseAt` initialized to `startAt`, and `lotCount` initialized to `totalSaleLots`.", "parent_reqt": "REQT-638fe24d5f", "impl_status": "COMPLETED", "added_in": "1.0", "maturity": {"status": "consented"}, "area_id": "MOD:area-fa7sg1smz5"}
{"id": "REQT-bw488gep8m", "reqt_id": "REQT-bw488gep8m", "mod_id": "MOD-0rndkpc314", "type": "requirement", "outline": "2.0", "title": "Data Integrity & Shared Validation", "purpose": "Establishes cross-cutting validation rules that multiple activities rely on. Applied when reviewing any activity that calls validate(), validateDetailsWhenPending(), or checks lot-count divisibility — or when adding a new activity that must inherit these checks.", "functional": "Every mutation to a sale record passes through shared validation gates: name length, non-empty assets, lot-count divisibility, and primary asset target consistency", "impl_status": "COMPLETED", "added_in": "1.0", "maturity": {"status": "consented"}, "area_id": "MOD:area-x4jj6hp9z7"}
{"id": "REQT-bk56aq15zn", "reqt_id": "REQT-bk56aq15zn", "mod_id": "MOD-0rndkpc314", "type": "requirement", "outline": "2.1.0", "title": "Record-Level Validation (validate())", "purpose": "Specifies the general-purpose validate() function that applies to all MarketSaleData records regardless of state. Applied when any activity creates or updates a record.", "parent_reqt": "REQT-bw488gep8m", "impl_status": "COMPLETED", "added_in": "1.0", "maturity": {"status": "consented"}, "area_id": "MOD:area-x4jj6hp9z7"}
{"id": "REQT-y16j4t955c", "reqt_id": "REQT-y16j4t955c", "mod_id": "MOD-0rndkpc314", "type": "requirement", "outline": "2.1.1", "title": "Name Length", "statement": "The record's `name` field MUST be at least 10 characters (serialized length).", "parent_reqt": "REQT-bk56aq15zn", "impl_status": "COMPLETED", "added_in": "1.0", "maturity": {"status": "consented"}, "area_id": "MOD:area-x4jj6hp9z7"}
{"id": "REQT-egttdcamhg", "reqt_id": "REQT-egttdcamhg", "mod_id": "MOD-0rndkpc314", "type": "requirement", "outline": "2.1.2", "title": "Non-Empty Assets", "statement": "`saleLotAssets` MUST NOT be empty, `totalSaleLots` MUST be > 0, `singleBuyMaxLots` MUST be > 0 and < `totalSaleLots`, and `primaryAssetTargetCount` MUST be > 0.", "parent_reqt": "REQT-bk56aq15zn", "impl_status": "COMPLETED", "added_in": "1.0", "maturity": {"status": "consented"}, "area_id": "MOD:area-x4jj6hp9z7"}
{"id": "REQT-4m66trmpkr", "reqt_id": "REQT-4m66trmpkr", "mod_id": "MOD-0rndkpc314", "type": "requirement", "outline": "2.1.3", "title": "Primary Asset Target Consistency", "statement": "`primaryAssetTargetCount` MUST equal `saleLotAssets[primaryAsset] × totalSaleLots` — the per-lot size times the lot count must produce the target.", "parent_reqt": "REQT-bk56aq15zn", "impl_status": "COMPLETED", "added_in": "1.0", "maturity": {"status": "consented"}, "area_id": "MOD:area-x4jj6hp9z7"}
{"id": "REQT-v4j9fxv7ch", "reqt_id": "REQT-v4j9fxv7ch", "mod_id": "MOD-0rndkpc314", "type": "requirement", "outline": "2.2.0", "title": "Pending-State Validation (validateDetailsWhenPending())", "purpose": "Specifies the validation rules that apply specifically when a record is in Pending state. Called by CreatingRecord, AddingToSale, and UpdatingPendingSale.", "parent_reqt": "REQT-bw488gep8m", "impl_status": "COMPLETED", "added_in": "1.0", "maturity": {"status": "consented"}, "area_id": "MOD:area-x4jj6hp9z7"}
{"id": "REQT-ghwq4n2z47", "reqt_id": "REQT-ghwq4n2z47", "mod_id": "MOD-0rndkpc314", "type": "requirement", "outline": "2.2.1", "title": "Sale Pace Initialized", "statement": "When Pending, `salePace` MUST be initialized to 1.0.", "parent_reqt": "REQT-v4j9fxv7ch", "impl_status": "COMPLETED", "added_in": "1.0", "maturity": {"status": "consented"}, "area_id": "MOD:area-x4jj6hp9z7"}
{"id": "REQT-r1gn242egz", "reqt_id": "REQT-r1gn242egz", "mod_id": "MOD-0rndkpc314", "type": "requirement", "outline": "2.2.2", "title": "Progress Details When Pending", "statement": "When Pending, `lotsSold` MUST be 0, `lastPurchaseAt` and `prevPurchaseAt` MUST equal `startAt`, and `lotCount` MUST equal `totalSaleLots`.", "parent_reqt": "REQT-v4j9fxv7ch", "impl_status": "COMPLETED", "added_in": "1.0", "maturity": {"status": "consented"}, "area_id": "MOD:area-x4jj6hp9z7"}
{"id": "REQT-q1v92hjxwa", "reqt_id": "REQT-q1v92hjxwa", "mod_id": "MOD-0rndkpc314", "type": "requirement", "outline": "2.2.3", "title": "Thread Info When Pending", "statement": "When Pending, `parentChunkId` MUST be empty, `saleId` MUST equal the record's id, and `nestedThreads` and `retiredThreads` MUST be 0.", "parent_reqt": "REQT-v4j9fxv7ch", "impl_status": "COMPLETED", "added_in": "1.0", "maturity": {"status": "consented"}, "area_id": "MOD:area-x4jj6hp9z7"}
{"id": "REQT-5x71zzdpgb", "reqt_id": "REQT-5x71zzdpgb", "mod_id": "MOD-0rndkpc314", "type": "requirement", "outline": "2.2.4", "title": "Settings Validation When Pending", "statement": "When Pending, `fixedSaleDetails.settings` MUST pass `validateDetailsWhenPending()` — sane bounds on all pricing parameters.", "parent_reqt": "REQT-v4j9fxv7ch", "impl_status": "COMPLETED", "added_in": "1.0", "maturity": {"status": "consented"}, "area_id": "MOD:area-x4jj6hp9z7"}
{"id": "REQT-46gmm6198w", "reqt_id": "REQT-46gmm6198w", "mod_id": "MOD-0rndkpc314", "type": "requirement", "outline": "3.0", "title": "Sale Lifecycle", "purpose": "Defines the valid states and transitions for a MarketSale record. Applied when reviewing state transition logic, adding new activities, or auditing that illegal transitions are rejected.", "functional": "The sale follows a defined state machine: Pending → Active ⇄ Paused, and Paused → Retired. Each transition requires specific authority and preconditions. Illegal transitions are rejected on-chain.", "impl_status": "NEXT", "added_in": "1.0", "maturity": {"status": "draft"}, "area_id": "MOD:area-5fw788jm0m"}
{"id": "REQT-j12bhjzrxp", "reqt_id": "REQT-j12bhjzrxp", "mod_id": "MOD-0rndkpc314", "type": "requirement", "outline": "3.1.0", "title": "Valid States", "purpose": "Enumerates all legal states in the MarketSaleState enum. Applied when modifying the enum or verifying state-dependent logic.", "parent_reqt": "REQT-46gmm6198w", "impl_status": "COMPLETED", "added_in": "1.0", "maturity": {"status": "consented"}, "area_id": "MOD:area-5fw788jm0m"}
{"id": "REQT-6kdmzqf3nk", "reqt_id": "REQT-6kdmzqf3nk", "mod_id": "MOD-0rndkpc314", "type": "requirement", "outline": "3.1.1", "title": "Pending State", "statement": "The `Pending` state is the initial state for all newly created sales. Sales remain Pending during configuration and token deposits.", "parent_reqt": "REQT-j12bhjzrxp", "impl_status": "COMPLETED", "added_in": "1.0", "maturity": {"status": "consented"}, "area_id": "MOD:area-5fw788jm0m"}
{"id": "REQT-1whgp2m8jq", "reqt_id": "REQT-1whgp2m8jq", "mod_id": "MOD-0rndkpc314", "type": "requirement", "outline": "3.1.2", "title": "Active State", "statement": "The `Active` state indicates the sale is open for token purchases. Entered via Activating (from Pending) or Resuming (from Paused).", "parent_reqt": "REQT-j12bhjzrxp", "impl_status": "NEXT", "added_in": "1.0", "maturity": {"status": "draft"}, "area_id": "MOD:area-5fw788jm0m"}
{"id": "REQT-e7dqc25smj", "reqt_id": "REQT-e7dqc25smj", "mod_id": "MOD-0rndkpc314", "type": "requirement", "outline": "3.1.3", "title": "Paused State", "statement": "The `Paused` state indicates the sale is temporarily halted. Configuration can be modified while paused. Entered via Stopping (from Active).", "parent_reqt": "REQT-j12bhjzrxp", "impl_status": "NEXT", "added_in": "2.0", "maturity": {"status": "draft"}, "area_id": "MOD:area-5fw788jm0m"}
{"id": "REQT-yq3genxzkf", "reqt_id": "REQT-yq3genxzkf", "mod_id": "MOD-0rndkpc314", "type": "requirement", "outline": "3.1.4", "title": "Retired State", "statement": "The `Retired` state indicates the sale has been permanently wound down. Entered via Retiring (from Paused only — must Stop before Retiring).", "parent_reqt": "REQT-j12bhjzrxp", "impl_status": "NEXT", "added_in": "2.0", "maturity": {"status": "draft"}, "area_id": "MOD:area-5fw788jm0m"}
{"id": "REQT-0nnrndkzy2", "reqt_id": "REQT-0nnrndkzy2", "mod_id": "MOD-0rndkpc314", "type": "requirement", "outline": "3.1.5", "title": "SoldOut State", "statement": "The `SoldOut` state indicates all tokens have been purchased. Transition mechanism TBD.", "parent_reqt": "REQT-j12bhjzrxp", "impl_status": "FUTURE", "added_in": "1.0", "maturity": {"status": "draft"}, "area_id": "MOD:area-5fw788jm0m"}
{"id": "REQT-1gfsfsxcdh", "reqt_id": "REQT-1gfsfsxcdh", "mod_id": "MOD-0rndkpc314", "type": "requirement", "outline": "3.2.0", "title": "Valid Transitions", "purpose": "Enumerates all legal state transitions and the activities that perform them. Applied when adding new activities or auditing transition completeness.", "parent_reqt": "REQT-46gmm6198w", "impl_status": "COMPLETED", "added_in": "1.0", "maturity": {"status": "consented"}, "area_id": "MOD:area-5fw788jm0m"}
{"id": "REQT-t537rnzjz9", "reqt_id": "REQT-t537rnzjz9", "mod_id": "MOD-0rndkpc314", "type": "requirement", "outline": "3.2.1", "title": "Pending → Active", "statement": "Transition via the `Activating` spending activity. MUST require gov authority. See REQT-3h96mdmn5k (Activation).", "parent_reqt": "REQT-1gfsfsxcdh", "impl_status": "COMPLETED", "added_in": "1.0", "maturity": {"status": "consented"}, "area_id": "MOD:area-5fw788jm0m"}
{"id": "REQT-fx7m3y1ctf", "reqt_id": "REQT-fx7m3y1ctf", "mod_id": "MOD-0rndkpc314", "type": "requirement", "outline": "3.2.2", "title": "Active → Paused", "statement": "Transition via the `Stopping` spending activity. MUST require gov authority. All datum fields except state MUST be unchanged.", "parent_reqt": "REQT-1gfsfsxcdh", "impl_status": "NEXT", "added_in": "2.0", "maturity": {"status": "draft"}, "area_id": "MOD:area-5fw788jm0m"}
{"id": "REQT-3h96mdmn5k", "reqt_id": "REQT-3h96mdmn5k", "mod_id": "MOD-0rndkpc314", "type": "requirement", "outline": "3.2.3", "title": "Paused → Active", "statement": "Transition via the `Resuming` spending activity. MUST require gov authority. Deposited tokens must still match `saleLotAssets × totalSaleLots`. VxfDestination fields must validate.", "parent_reqt": "REQT-1gfsfsxcdh", "impl_status": "NEXT", "added_in": "2.0", "maturity": {"status": "draft"}, "area_id": "MOD:area-5fw788jm0m"}
{"id": "REQT-hcagxtdt35", "reqt_id": "REQT-hcagxtdt35", "mod_id": "MOD-0rndkpc314", "type": "requirement", "outline": "3.2.4", "title": "Paused → Retired", "statement": "Transition via the `Retiring` spending activity. MUST require gov authority. Token withdrawal/burning details apply.", "parent_reqt": "REQT-1gfsfsxcdh", "impl_status": "NEXT", "added_in": "2.0", "maturity": {"status": "draft"}, "area_id": "MOD:area-5fw788jm0m"}
{"id": "REQT-b2mqxegmvm", "reqt_id": "REQT-b2mqxegmvm", "mod_id": "MOD-0rndkpc314", "type": "requirement", "outline": "3.3.0", "title": "Illegal Transitions", "purpose": "Specifies transitions that MUST be rejected. Applied when testing negative cases or auditing that the state machine has no unintended paths.", "parent_reqt": "REQT-46gmm6198w", "impl_status": "COMPLETED", "added_in": "1.0", "maturity": {"status": "consented"}, "area_id": "MOD:area-5fw788jm0m"}
{"id": "REQT-7j07yjvpbh", "reqt_id": "REQT-7j07yjvpbh", "mod_id": "MOD-0rndkpc314", "type": "requirement", "outline": "3.3.1", "title": "No Direct Active → Retired", "statement": "Direct transition from Active to Retired MUST be rejected. The sale must be Stopped (Paused) first.", "parent_reqt": "REQT-b2mqxegmvm", "impl_status": "NEXT", "added_in": "2.0", "maturity": {"status": "draft"}, "area_id": "MOD:area-5fw788jm0m"}
{"id": "REQT-jdepn901ag", "reqt_id": "REQT-jdepn901ag", "mod_id": "MOD-0rndkpc314", "type": "requirement", "outline": "3.3.2", "title": "No Selling While Paused", "statement": "SellingTokens MUST reject transactions when the sale state is Paused.", "parent_reqt": "REQT-b2mqxegmvm", "impl_status": "NEXT", "added_in": "2.0", "maturity": {"status": "draft"}, "area_id": "MOD:area-5fw788jm0m"}
{"id": "REQT-w0hvrt4xx8", "reqt_id": "REQT-w0hvrt4xx8", "mod_id": "MOD-0rndkpc314", "type": "requirement", "outline": "3.3.3", "title": "No State Regression from Retired", "statement": "Once Retired, no transition back to any other state is permitted.", "parent_reqt": "REQT-b2mqxegmvm", "impl_status": "NEXT", "added_in": "2.0", "maturity": {"status": "draft"}, "area_id": "MOD:area-5fw788jm0m"}
{"id": "REQT-d35rbza73j", "reqt_id": "REQT-d35rbza73j", "mod_id": "MOD-0rndkpc314", "type": "requirement", "outline": "3.4.0", "title": "State Helper Functions", "purpose": "Specifies helper functions on OtherSaleStateV1 for state assertion. Applied when adding new state-dependent logic.", "parent_reqt": "REQT-46gmm6198w", "impl_status": "COMPLETED", "added_in": "1.0", "maturity": {"status": "consented"}, "area_id": "MOD:area-5fw788jm0m"}
{"id": "REQT-drf4ze11j1", "reqt_id": "REQT-drf4ze11j1", "mod_id": "MOD-0rndkpc314", "type": "requirement", "outline": "3.4.1", "title": "mustBePending Helper", "statement": "`OtherSaleStateV1` MUST provide `mustBePending()` that asserts state == Pending with REQT tracing.", "parent_reqt": "REQT-d35rbza73j", "impl_status": "COMPLETED", "added_in": "1.0", "maturity": {"status": "consented"}, "area_id": "MOD:area-5fw788jm0m"}
{"id": "REQT-b2yk2ga4xy", "reqt_id": "REQT-b2yk2ga4xy", "mod_id": "MOD-0rndkpc314", "type": "requirement", "outline": "3.4.2", "title": "mustBeActive Helper", "statement": "`OtherSaleStateV1` MUST provide `mustBeActive()` that asserts state == Active with REQT tracing.", "parent_reqt": "REQT-d35rbza73j", "impl_status": "COMPLETED", "added_in": "1.0", "maturity": {"status": "consented"}, "area_id": "MOD:area-5fw788jm0m"}
{"id": "REQT-a1c1x495x6", "reqt_id": "REQT-a1c1x495x6", "mod_id": "MOD-0rndkpc314", "type": "requirement", "outline": "3.4.3", "title": "mustBePaused Helper", "statement": "`OtherSaleStateV1` MUST provide `mustBePaused()` that asserts state == Paused with REQT tracing.", "parent_reqt": "REQT-d35rbza73j", "impl_status": "NEXT", "added_in": "2.0", "maturity": {"status": "draft"}, "area_id": "MOD:area-5fw788jm0m"}
{"id": "REQT-qfrahy70dw", "reqt_id": "REQT-qfrahy70dw", "mod_id": "MOD-0rndkpc314", "type": "requirement", "outline": "4.0", "title": "Token Management", "purpose": "Governs the AddingToSale activity for depositing tokens into a Pending sale. Applied when reviewing token deposit logic, lot-count divisibility enforcement, or testing AddTokens scenarios.", "functional": "Tokens are deposited into a Pending sale in amounts that maintain even lot distribution. The policy enforces divisibility, prevents over-deposit, and requires governance authority. Note: VXF destination configuration also occurs during this phase — see REQT-ywj3w9avvc (VXF Protocol Integration) for destination sealing requirements.", "impl_status": "COMPLETED", "added_in": "1.0", "maturity": {"status": "consented"}, "area_id": "MOD:area-sh8j16739s"}
{"id": "REQT-ajad2mdhf5", "reqt_id": "REQT-ajad2mdhf5", "mod_id": "MOD-0rndkpc314", "type": "requirement", "outline": "4.1.0", "title": "AddingToSale Activity", "purpose": "Specifies the on-chain validation for the AddingToSale spending activity. Applied when implementing or testing token deposits.", "parent_reqt": "REQT-qfrahy70dw", "impl_status": "COMPLETED", "added_in": "1.0", "maturity": {"status": "consented"}, "area_id": "MOD:area-sh8j16739s"}
{"id": "REQT-8hpbbxf9f2", "reqt_id": "REQT-8hpbbxf9f2", "mod_id": "MOD-0rndkpc314", "type": "requirement", "outline": "4.1.1", "title": "Pending State Required", "statement": "AddingToSale MUST require both previous and next state to be Pending.", "parent_reqt": "REQT-ajad2mdhf5", "impl_status": "COMPLETED", "added_in": "1.0", "maturity": {"status": "consented"}, "area_id": "MOD:area-sh8j16739s"}
{"id": "REQT-83ne1xjxwh", "reqt_id": "REQT-83ne1xjxwh", "mod_id": "MOD-0rndkpc314", "type": "requirement", "outline": "4.1.2", "title": "Gov Authority", "statement": "AddingToSale MUST require governance authority.", "parent_reqt": "REQT-ajad2mdhf5", "impl_status": "COMPLETED", "added_in": "1.0", "maturity": {"status": "consented"}, "area_id": "MOD:area-sh8j16739s"}
{"id": "REQT-8gydvpdfrf", "reqt_id": "REQT-8gydvpdfrf", "mod_id": "MOD-0rndkpc314", "type": "requirement", "outline": "4.1.3", "title": "Even Lot Distribution", "statement": "The deposited asset total in the UTxO MUST be an even multiple of `totalSaleLots` — ensuring each lot gets the same number of tokens.", "parent_reqt": "REQT-ajad2mdhf5", "impl_status": "COMPLETED", "added_in": "1.0", "maturity": {"status": "consented"}, "area_id": "MOD:area-sh8j16739s"}
{"id": "REQT-qnp1cs4rdv", "reqt_id": "REQT-qnp1cs4rdv", "mod_id": "MOD-0rndkpc314", "type": "requirement", "outline": "4.1.4", "title": "No Over-Deposit", "statement": "The deposited asset total MUST NOT exceed `saleLotAssets[asset] × totalSaleLots` — prevents depositing more tokens than planned.", "parent_reqt": "REQT-ajad2mdhf5", "impl_status": "COMPLETED", "added_in": "1.0", "maturity": {"status": "consented"}, "area_id": "MOD:area-sh8j16739s"}
{"id": "REQT-kxvdv1ac56", "reqt_id": "REQT-kxvdv1ac56", "mod_id": "MOD-0rndkpc314", "type": "requirement", "outline": "4.1.5", "title": "General Validation Passes", "statement": "The updated record MUST pass `validate()` and `threadInfo.validateDetailsWhenPending()`.", "parent_reqt": "REQT-ajad2mdhf5", "impl_status": "COMPLETED", "added_in": "1.0", "needs": ["REQT-bk56aq15zn", "REQT-q1v92hjxwa"], "maturity": {"status": "consented"}, "area_id": "MOD:area-sh8j16739s"}
{"id": "REQT-kmbd7bwwy8", "reqt_id": "REQT-kmbd7bwwy8", "mod_id": "MOD-0rndkpc314", "type": "requirement", "outline": "4.2.0", "title": "Deposit Constraints for Sale Readiness", "purpose": "Specifies how token deposits contribute to a sale being ready for activation. Applied when evaluating whether AddTokens is sufficient preparation for Activating.", "functional": "Depositing tokens enforces even distribution so the sale can be activated cleanly — partial deposits are allowed as long as each deposit maintains even lot sizes", "parent_reqt": "REQT-qfrahy70dw", "impl_status": "COMPLETED", "added_in": "1.0", "maturity": {"status": "consented"}, "area_id": "MOD:area-sh8j16739s"}
{"id": "REQT-dmjase5q5f", "reqt_id": "REQT-dmjase5q5f", "mod_id": "MOD-0rndkpc314", "type": "requirement", "outline": "4.2.1", "title": "Non-Primary Token Evenness", "statement": "When adding non-primary tokens, the existing `saleLotAssets` MUST already be even (evenly divisible by totalSaleLots) — prevents adding tokens when the bundle is in an inconsistent state.", "parent_reqt": "REQT-kmbd7bwwy8", "impl_status": "COMPLETED", "added_in": "1.0", "maturity": {"status": "consented"}, "area_id": "MOD:area-sh8j16739s"}
{"id": "REQT-yd80rz9kdx", "reqt_id": "REQT-yd80rz9kdx", "mod_id": "MOD-0rndkpc314", "type": "requirement", "outline": "4.2.2", "title": "Primary Token Partial Deposit", "statement": "The primary token MAY be partially or fully deposited in a single AddTokens transaction, as long as the deposited amount is an even multiple of `totalSaleLots`.", "parent_reqt": "REQT-kmbd7bwwy8", "impl_status": "COMPLETED", "added_in": "1.0", "maturity": {"status": "consented"}, "area_id": "MOD:area-sh8j16739s"}
{"id": "REQT-4pgkmk92t2", "reqt_id": "REQT-4pgkmk92t2", "mod_id": "MOD-0rndkpc314", "type": "requirement", "outline": "5.0", "title": "Pending Sale Configuration", "purpose": "Governs the UpdatingPendingSale activity for modifying sale details before activation. Applied when reviewing edit constraints, frozen/editable field logic, or testing Pending-state updates. Note: VXF destination fields are validated during pending updates — see REQT-ywj3w9avvc (VXF Protocol Integration) for validation rules.", "functional": "While a sale is Pending, its configuration can be freely adjusted — name, pricing settings, asset configuration, VXF destinations — while identity, state, progress details, and thread info remain immutable", "impl_status": "COMPLETED", "added_in": "1.0", "maturity": {"status": "consented"}, "area_id": "MOD:area-g4w6yxg5gz"}
{"id": "REQT-vw60xnp2cm", "reqt_id": "REQT-vw60xnp2cm", "mod_id": "MOD-0rndkpc314", "type": "requirement", "outline": "5.1.0", "title": "UpdatingPendingSale Activity", "purpose": "Specifies the on-chain validation for the UpdatingPendingSale spending activity. Applied when implementing or testing pending sale edits.", "parent_reqt": "REQT-4pgkmk92t2", "impl_status": "COMPLETED", "added_in": "1.0", "maturity": {"status": "consented"}, "area_id": "MOD:area-g4w6yxg5gz"}
{"id": "REQT-awm703enab", "reqt_id": "REQT-awm703enab", "mod_id": "MOD-0rndkpc314", "type": "requirement", "outline": "5.1.1", "title": "Pending State Required", "statement": "UpdatingPendingSale MUST require both previous and next state to be Pending.", "parent_reqt": "REQT-vw60xnp2cm", "impl_status": "COMPLETED", "added_in": "1.0", "maturity": {"status": "consented"}, "area_id": "MOD:area-g4w6yxg5gz"}
{"id": "REQT-h0a7mc0trg", "reqt_id": "REQT-h0a7mc0trg", "mod_id": "MOD-0rndkpc314", "type": "requirement", "outline": "5.1.2", "title": "Gov Authority", "statement": "UpdatingPendingSale MUST require governance authority.", "parent_reqt": "REQT-vw60xnp2cm", "impl_status": "COMPLETED", "added_in": "1.0", "maturity": {"status": "consented"}, "area_id": "MOD:area-g4w6yxg5gz"}
{"id": "REQT-x90a87fs1w", "reqt_id": "REQT-x90a87fs1w", "mod_id": "MOD-0rndkpc314", "type": "requirement", "outline": "5.1.3", "title": "UTxO Token Value Unchanged", "statement": "The UTxO's token value (assets) MUST NOT change during an update — no tokens added or removed.", "parent_reqt": "REQT-vw60xnp2cm", "impl_status": "COMPLETED", "added_in": "1.0", "maturity": {"status": "consented"}, "area_id": "MOD:area-g4w6yxg5gz"}
{"id": "REQT-p0mam5tnbd", "reqt_id": "REQT-p0mam5tnbd", "mod_id": "MOD-0rndkpc314", "type": "requirement", "outline": "5.1.4", "title": "Sale Pace Frozen at 1.0", "statement": "`salePace` MUST remain at 1.0 during pending updates — no pace manipulation before activation.", "parent_reqt": "REQT-vw60xnp2cm", "impl_status": "COMPLETED", "added_in": "1.0", "maturity": {"status": "consented"}, "area_id": "MOD:area-g4w6yxg5gz"}
{"id": "REQT-cvx2qrb5sv", "reqt_id": "REQT-cvx2qrb5sv", "mod_id": "MOD-0rndkpc314", "type": "requirement", "outline": "5.1.5", "title": "Thread Info Frozen", "statement": "`threadInfo` MUST equal previous — no structural changes during pending edits.", "parent_reqt": "REQT-vw60xnp2cm", "impl_status": "COMPLETED", "added_in": "1.0", "maturity": {"status": "consented"}, "area_id": "MOD:area-g4w6yxg5gz"}
{"id": "REQT-d8enkc82c7", "reqt_id": "REQT-d8enkc82c7", "mod_id": "MOD-0rndkpc314", "type": "requirement", "outline": "5.1.6", "title": "Progress Details Validated", "statement": "Progress details MUST pass `validateDetailsWhenPending()` — lotsSold == 0, timestamps == startAt, lotCount == totalSaleLots.", "parent_reqt": "REQT-vw60xnp2cm", "impl_status": "COMPLETED", "added_in": "1.0", "needs": ["REQT-r1gn242egz"], "maturity": {"status": "consented"}, "area_id": "MOD:area-g4w6yxg5gz"}
{"id": "REQT-gwqygd9ntx", "reqt_id": "REQT-gwqygd9ntx", "mod_id": "MOD-0rndkpc314", "type": "requirement", "outline": "5.1.7", "title": "Settings Bounds Validation", "statement": "Updated `settings` MUST pass `validateDetailsWhenPending()` — sane bounds on all pricing parameters.", "parent_reqt": "REQT-vw60xnp2cm", "impl_status": "COMPLETED", "added_in": "1.0", "needs": ["REQT-5x71zzdpgb"], "maturity": {"status": "consented"}, "area_id": "MOD:area-g4w6yxg5gz"}
{"id": "REQT-x5ntw4y5mf", "reqt_id": "REQT-x5ntw4y5mf", "mod_id": "MOD-0rndkpc314", "type": "requirement", "outline": "5.1.8", "title": "General Validation Passes", "statement": "The updated record MUST pass `validate()` and `threadInfo.validateDetailsWhenPending()`.", "parent_reqt": "REQT-vw60xnp2cm", "impl_status": "COMPLETED", "added_in": "1.0", "needs": ["REQT-bk56aq15zn"], "maturity": {"status": "consented"}, "area_id": "MOD:area-g4w6yxg5gz"}
{"id": "REQT-3x0fmfejw2", "reqt_id": "REQT-3x0fmfejw2", "mod_id": "MOD-0rndkpc314", "type": "requirement", "outline": "5.2.0", "title": "Primary Asset Change Logic", "purpose": "Specifies the complex rules governing primary asset identity changes during pending updates. Applied when the admin changes which token is the 'primary' asset of the sale.", "functional": "The primary asset can be changed while Pending, but the policy enforces consistency: if old primary tokens are deposited, lot sizes must account for them; if the asset identity changes, the new primary must appear in saleLotAssets", "parent_reqt": "REQT-4pgkmk92t2", "impl_status": "COMPLETED", "added_in": "1.0", "maturity": {"status": "consented"}, "area_id": "MOD:area-g4w6yxg5gz"}
{"id": "REQT-p36f93wy20", "reqt_id": "REQT-p36f93wy20", "mod_id": "MOD-0rndkpc314", "type": "requirement", "outline": "5.2.1", "title": "Old Primary Tokens Present", "statement": "When old primary tokens exist in the UTxO and the primary asset changes, `saleLotAssets` MUST keep a minimum lot-size for the old primary ≥ depositedTokens / totalSaleLots.", "parent_reqt": "REQT-3x0fmfejw2", "impl_status": "COMPLETED", "added_in": "1.0", "maturity": {"status": "consented"}, "area_id": "MOD:area-g4w6yxg5gz"}
{"id": "REQT-1qm3dvtqdy", "reqt_id": "REQT-1qm3dvtqdy", "mod_id": "MOD-0rndkpc314", "type": "requirement", "outline": "5.2.2", "title": "New Primary in SaleLotAssets", "statement": "When old primary tokens exist and the primary asset changes, `saleLotAssets` MUST contain the new primary token.", "parent_reqt": "REQT-3x0fmfejw2", "impl_status": "COMPLETED", "added_in": "1.0", "maturity": {"status": "consented"}, "area_id": "MOD:area-g4w6yxg5gz"}
{"id": "REQT-p1vqggggec", "reqt_id": "REQT-p1vqggggec", "mod_id": "MOD-0rndkpc314", "type": "requirement", "outline": "5.2.3", "title": "No Old Primary Without Deposit", "statement": "When no old primary tokens are deposited and the primary asset changes, `saleLotAssets` MUST NOT reference the old primary token.", "parent_reqt": "REQT-3x0fmfejw2", "impl_status": "COMPLETED", "added_in": "1.0", "maturity": {"status": "consented"}, "area_id": "MOD:area-g4w6yxg5gz"}
{"id": "REQT-xmxrfjrdjk", "reqt_id": "REQT-xmxrfjrdjk", "mod_id": "MOD-0rndkpc314", "type": "requirement", "outline": "5.2.4", "title": "Primary Asset Target Consistency", "statement": "After any update, `primaryAssetTargetCount` MUST equal `saleLotAssets[primaryAsset] × totalSaleLots`.", "parent_reqt": "REQT-3x0fmfejw2", "impl_status": "COMPLETED", "added_in": "1.0", "needs": ["REQT-4m66trmpkr"], "maturity": {"status": "consented"}, "area_id": "MOD:area-g4w6yxg5gz"}
{"id": "REQT-jpvcqgq1na", "reqt_id": "REQT-jpvcqgq1na", "mod_id": "MOD-0rndkpc314", "type": "requirement", "outline": "5.2.5", "title": "SaleLotAssets Must Contain Primary", "statement": "`saleLotAssets` MUST always contain the primary asset, even if no tokens have been deposited yet.", "parent_reqt": "REQT-3x0fmfejw2", "impl_status": "COMPLETED", "added_in": "1.0", "maturity": {"status": "consented"}, "area_id": "MOD:area-g4w6yxg5gz"}
{"id": "REQT-ywj3w9avvc", "reqt_id": "REQT-ywj3w9avvc", "mod_id": "MOD-0rndkpc314", "type": "requirement", "outline": "6.0", "title": "VXF Protocol Integration", "purpose": "Governs how the MarketSale participates in the VXF protocol for routing funds and tokens to validated destinations. Applied when reviewing destination configuration, validation during state transitions, or enforcement during sales — or when adding a new activity that touches VXF fields.", "functional": "The sale captures where funds and tokens should be routed (vxfFundsTo, vxfTokensTo), validates those destinations during configuration and activation, and enforces routing during actual sales", "impl_status": "P1", "added_in": "1.0", "maturity": {"status": "draft"}, "area_id": "MOD:area-h8xgj93adg"}
{"id": "REQT-9v1dz5dsn9", "reqt_id": "REQT-9v1dz5dsn9", "mod_id": "MOD-0rndkpc314", "type": "requirement", "outline": "6.1.0", "title": "VXF Destination Configuration", "purpose": "Specifies how VXF destinations are sealed into a sale record. Applied when reviewing the sealing flow or testing destination configuration.", "functional": "Sale administrators can configure where funds and tokens are routed by sealing VxfDestination records into the sale, with governance authority and receiver participation required", "parent_reqt": "REQT-ywj3w9avvc", "impl_status": "P1", "added_in": "1.0", "maturity": {"status": "draft"}, "area_id": "MOD:area-h8xgj93adg"}
{"id": "REQT-v3vjh5njnd", "reqt_id": "REQT-v3vjh5njnd", "mod_id": "MOD-0rndkpc314", "type": "requirement", "outline": "6.1.1", "title": "Seal vxfTokensTo", "statement": "The sale MUST allow sealing a `VxfDestination` into the `vxfTokensTo` field, provided the VXF receiver is participating in the transaction.", "parent_reqt": "REQT-9v1dz5dsn9", "impl_status": "P1", "added_in": "1.0", "maturity": {"status": "draft"}, "area_id": "MOD:area-h8xgj93adg"}
{"id": "REQT-9ae13swvwy", "reqt_id": "REQT-9ae13swvwy", "mod_id": "MOD-0rndkpc314", "type": "requirement", "outline": "6.1.2", "title": "Seal vxfFundsTo", "statement": "The sale MUST allow sealing a `VxfDestination` into the `vxfFundsTo` field, provided the VXF receiver is participating in the transaction.", "parent_reqt": "REQT-9v1dz5dsn9", "impl_status": "P1", "added_in": "1.0", "maturity": {"status": "draft"}, "area_id": "MOD:area-h8xgj93adg"}
{"id": "REQT-9xhare9c1a", "reqt_id": "REQT-9xhare9c1a", "mod_id": "MOD-0rndkpc314", "type": "requirement", "outline": "6.1.3", "title": "Sealing Requires Gov Authority", "statement": "Sealing either VXF destination MUST require governance authority.", "parent_reqt": "REQT-9v1dz5dsn9", "impl_status": "P1", "added_in": "1.0", "maturity": {"status": "draft"}, "area_id": "MOD:area-h8xgj93adg"}
{"id": "REQT-7wfa7b7x3t", "reqt_id": "REQT-7wfa7b7x3t", "mod_id": "MOD-0rndkpc314", "type": "requirement", "outline": "6.1.4", "title": "Sealing Requires Receiver Participation", "statement": "Sealing MUST NOT succeed without the VXF receiver's participation in the transaction — the receiver's UTxO must be present.", "parent_reqt": "REQT-9v1dz5dsn9", "impl_status": "P1", "added_in": "1.0", "maturity": {"status": "draft"}, "area_id": "MOD:area-h8xgj93adg"}
{"id": "REQT-w6e5qsfxq1", "reqt_id": "REQT-w6e5qsfxq1", "mod_id": "MOD-0rndkpc314", "type": "requirement", "outline": "6.2.0", "title": "VXF Destination Validation on State Transitions", "purpose": "Specifies when VxfDestination fields are validated during lifecycle activities. Applied when reviewing Activating, UpdatingPendingSale, UpdatingPausedSale, or Resuming validation.", "functional": "VXF destinations are validated during key activities: Activating requires vxfFundsTo, pending/paused updates validate if present, and Resuming re-validates", "parent_reqt": "REQT-ywj3w9avvc", "impl_status": "NEXT", "added_in": "1.0", "maturity": {"status": "draft"}, "area_id": "MOD:area-h8xgj93adg"}
{"id": "REQT-x3xkgwp94t", "reqt_id": "REQT-x3xkgwp94t", "mod_id": "MOD-0rndkpc314", "type": "requirement", "outline": "6.2.1", "title": "Activating Requires vxfFundsTo", "statement": "The `Activating` activity MUST validate that `vxfFundsTo` is present (Some) and passes `VxfDestination.validate()`. A sale MUST NOT activate without a configured funds destination.", "parent_reqt": "REQT-w6e5qsfxq1", "impl_status": "COMPLETED", "added_in": "1.0", "maturity": {"status": "consented"}, "area_id": "MOD:area-h8xgj93adg"}
{"id": "REQT-d67c29t29w", "reqt_id": "REQT-d67c29t29w", "mod_id": "MOD-0rndkpc314", "type": "requirement", "outline": "6.2.2", "title": "Activating Validates vxfTokensTo If Present", "statement": "The `Activating` activity MUST validate `vxfTokensTo` if present (Some). If None, activation proceeds without token routing constraints.", "parent_reqt": "REQT-w6e5qsfxq1", "impl_status": "COMPLETED", "added_in": "1.0", "maturity": {"status": "consented"}, "area_id": "MOD:area-h8xgj93adg"}
{"id": "REQT-g563tb3ks1", "reqt_id": "REQT-g563tb3ks1", "mod_id": "MOD-0rndkpc314", "type": "requirement", "outline": "6.2.3", "title": "Pending Update Validates VXF If Present", "statement": "`UpdatingPendingSale` MUST validate `vxfTokensTo` and `vxfFundsTo` if present (Some). If None, the update proceeds — destinations are optional until activation.", "parent_reqt": "REQT-w6e5qsfxq1", "impl_status": "COMPLETED", "added_in": "1.0", "maturity": {"status": "consented"}, "area_id": "MOD:area-h8xgj93adg"}
{"id": "REQT-6z88fg6j2s", "reqt_id": "REQT-6z88fg6j2s", "mod_id": "MOD-0rndkpc314", "type": "requirement", "outline": "6.2.4", "title": "Paused Update Validates VXF If Present", "statement": "`UpdatingPausedSale` MUST validate `vxfTokensTo` and `vxfFundsTo` if present (Some), using the same validation as pending updates.", "parent_reqt": "REQT-w6e5qsfxq1", "impl_status": "NEXT", "added_in": "2.0", "maturity": {"status": "draft"}, "area_id": "MOD:area-h8xgj93adg"}
{"id": "REQT-jkbaba8n7n", "reqt_id": "REQT-jkbaba8n7n", "mod_id": "MOD-0rndkpc314", "type": "requirement", "outline": "6.2.5", "title": "Resuming Validates VXF", "statement": "`Resuming` MUST validate `vxfTokensTo` (if present) and `vxfFundsTo` (required) — the same checks as Activating, since the sale is re-entering Active state.", "parent_reqt": "REQT-w6e5qsfxq1", "impl_status": "NEXT", "added_in": "2.0", "maturity": {"status": "draft"}, "area_id": "MOD:area-h8xgj93adg"}
{"id": "REQT-3g0gz0gdkd", "reqt_id": "REQT-3g0gz0gdkd", "mod_id": "MOD-0rndkpc314", "type": "requirement", "outline": "6.3.0", "title": "VXF Enforcement During Sale", "purpose": "Specifies how VXF destinations are enforced when tokens are actually sold. Applied when implementing or reviewing the SellingTokens payment and token distribution logic.", "functional": "During a token sale, funds MUST be routed to the configured vxfFundsTo destination and tokens MUST be routed to vxfTokensTo (if configured) — the on-chain policy enforces this routing", "parent_reqt": "REQT-ywj3w9avvc", "impl_status": "P1", "added_in": "1.0", "maturity": {"status": "draft"}, "area_id": "MOD:area-h8xgj93adg"}
{"id": "REQT-tyqn2xp802", "reqt_id": "REQT-tyqn2xp802", "mod_id": "MOD-0rndkpc314", "type": "requirement", "outline": "6.3.1", "title": "Route Funds Per vxfFundsTo", "statement": "When `SellingTokens`, the payment MUST be routed according to the `vxfFundsTo` destination. The current implementation gathers payment to the sale UTxO — this MUST be replaced with VXF-compliant routing.", "summary": "SellingTokens MUST route payment per vxfFundsTo (currently gathers to sale UTxO — needs VXF routing)", "parent_reqt": "REQT-3g0gz0gdkd", "impl_status": "P1", "added_in": "1.0", "maturity": {"status": "draft"}, "area_id": "MOD:area-h8xgj93adg"}
{"id": "REQT-panxb0gcyv", "reqt_id": "REQT-panxb0gcyv", "mod_id": "MOD-0rndkpc314", "type": "requirement", "outline": "6.3.2", "title": "Route Tokens Per vxfTokensTo", "statement": "When `SellingTokens` and `vxfTokensTo` is configured (Some), purchased tokens MUST be routed to the configured VXF destination rather than directly to the buyer.", "parent_reqt": "REQT-3g0gz0gdkd", "impl_status": "P1", "added_in": "1.0", "maturity": {"status": "draft"}, "area_id": "MOD:area-h8xgj93adg"}
{"id": "REQT-mn6ffsd5j8", "reqt_id": "REQT-mn6ffsd5j8", "mod_id": "MOD-0rndkpc314", "type": "requirement", "outline": "6.3.3", "title": "Receiver Participation During Sale", "statement": "When `SellingTokens` with a configured VXF destination, the receiver's participation MUST be verified in the transaction — if so configured.", "parent_reqt": "REQT-3g0gz0gdkd", "impl_status": "P1", "added_in": "1.0", "maturity": {"status": "draft"}, "area_id": "MOD:area-h8xgj93adg"}
{"id": "REQT-vwec81eepz", "reqt_id": "REQT-vwec81eepz", "mod_id": "MOD-0rndkpc314", "type": "requirement", "outline": "7.0", "title": "Activation", "purpose": "Governs the Activating spending activity that transitions a fully-configured Pending sale to Active. Applied when reviewing activation preconditions, token deposit verification, or testing the Pending → Active transition.", "functional": "When a sale is activated, the policy verifies all tokens are deposited, VXF destinations are valid, the record passes all checks, and governance authority is present — then transitions to Active state", "impl_status": "COMPLETED", "added_in": "1.0", "maturity": {"status": "consented"}, "area_id": "MOD:area-p0zsm8zca8"}
{"id": "REQT-1hkdfqvqff", "reqt_id": "REQT-1hkdfqvqff", "mod_id": "MOD-0rndkpc314", "type": "requirement", "outline": "7.1.0", "title": "Activating Activity", "purpose": "Specifies the on-chain validation for the Activating spending activity. Applied when implementing or testing sale activation.", "parent_reqt": "REQT-vwec81eepz", "impl_status": "COMPLETED", "added_in": "1.0", "maturity": {"status": "consented"}, "area_id": "MOD:area-p0zsm8zca8"}
{"id": "REQT-cysrvb2b6f", "reqt_id": "REQT-cysrvb2b6f", "mod_id": "MOD-0rndkpc314", "type": "requirement", "outline": "7.1.1", "title": "State Transition", "statement": "Activating MUST require previous state == Pending and next state == Active.", "parent_reqt": "REQT-1hkdfqvqff", "impl_status": "COMPLETED", "added_in": "1.0", "needs": ["REQT-t537rnzjz9"], "maturity": {"status": "consented"}, "area_id": "MOD:area-p0zsm8zca8"}
{"id": "REQT-f7m51tgbf0", "reqt_id": "REQT-f7m51tgbf0", "mod_id": "MOD-0rndkpc314", "type": "requirement", "outline": "7.1.2", "title": "Gov Authority", "statement": "Activating MUST require governance authority.", "parent_reqt": "REQT-1hkdfqvqff", "impl_status": "COMPLETED", "added_in": "1.0", "maturity": {"status": "consented"}, "area_id": "MOD:area-p0zsm8zca8"}
{"id": "REQT-avxdr3ycqc", "reqt_id": "REQT-avxdr3ycqc", "mod_id": "MOD-0rndkpc314", "type": "requirement", "outline": "7.1.3", "title": "Name Unchanged", "statement": "Activating MUST verify that `name` has not changed from the previous record.", "parent_reqt": "REQT-1hkdfqvqff", "impl_status": "COMPLETED", "added_in": "1.0", "maturity": {"status": "consented"}, "area_id": "MOD:area-p0zsm8zca8"}
{"id": "REQT-m7yz0yd80v", "reqt_id": "REQT-m7yz0yd80v", "mod_id": "MOD-0rndkpc314", "type": "requirement", "outline": "7.1.4", "title": "Token Deposit Verification", "statement": "The UTxO MUST contain exactly `saleLotAssets × totalSaleLots` in token value (excluding the UUT). The full supply of tokens must be deposited before activation.", "parent_reqt": "REQT-1hkdfqvqff", "impl_status": "COMPLETED", "added_in": "1.0", "maturity": {"status": "consented"}, "area_id": "MOD:area-p0zsm8zca8"}
{"id": "REQT-4z5dkz9p2p", "reqt_id": "REQT-4z5dkz9p2p", "mod_id": "MOD-0rndkpc314", "type": "requirement", "outline": "7.1.5", "title": "VXF Validation", "statement": "Activating MUST validate VXF destinations per REQT-x3xkgwp94t (vxfFundsTo required) and REQT-d67c29t29w (vxfTokensTo if present).", "parent_reqt": "REQT-1hkdfqvqff", "impl_status": "COMPLETED", "added_in": "1.0", "needs": ["REQT-x3xkgwp94t", "REQT-d67c29t29w"], "maturity": {"status": "consented"}, "area_id": "MOD:area-p0zsm8zca8"}
{"id": "REQT-8ptt7tvth7", "reqt_id": "REQT-8ptt7tvth7", "mod_id": "MOD-0rndkpc314", "type": "requirement", "outline": "7.1.6", "title": "Thread Info Unchanged", "statement": "Activating MUST verify `threadInfo` passes `validateDetailsWhenPending()` — no structural changes during activation.", "parent_reqt": "REQT-1hkdfqvqff", "impl_status": "COMPLETED", "added_in": "1.0", "needs": ["REQT-q1v92hjxwa"], "maturity": {"status": "consented"}, "area_id": "MOD:area-p0zsm8zca8"}
{"id": "REQT-wt32kvjm9f", "reqt_id": "REQT-wt32kvjm9f", "mod_id": "MOD-0rndkpc314", "type": "requirement", "outline": "7.1.7", "title": "General Validation Passes", "statement": "The activated record MUST pass `validate()`.", "parent_reqt": "REQT-1hkdfqvqff", "impl_status": "COMPLETED", "added_in": "1.0", "needs": ["REQT-bk56aq15zn"], "maturity": {"status": "consented"}, "area_id": "MOD:area-p0zsm8zca8"}
{"id": "REQT-mgpyjxrhhw", "reqt_id": "REQT-mgpyjxrhhw", "mod_id": "MOD-0rndkpc314", "type": "requirement", "outline": "7.2.0", "title": "Activation Rejection Cases", "purpose": "Specifies conditions under which activation MUST fail. Applied when testing negative activation scenarios.", "functional": "Activation is rejected when tokens are missing, lot sizes don't divide evenly, VXF destinations are invalid, or the primary asset target count is inconsistent", "parent_reqt": "REQT-vwec81eepz", "impl_status": "COMPLETED", "added_in": "1.0", "maturity": {"status": "consented"}, "area_id": "MOD:area-p0zsm8zca8"}
{"id": "REQT-wragmsgcr7", "reqt_id": "REQT-wragmsgcr7", "mod_id": "MOD-0rndkpc314", "type": "requirement", "outline": "7.2.1", "title": "Missing Extra Tokens", "statement": "Activation MUST fail if `saleLotAssets` expects tokens (e.g., bundled non-primary tokens) that aren't deposited in the UTxO.", "parent_reqt": "REQT-mgpyjxrhhw", "impl_status": "COMPLETED", "added_in": "1.0", "maturity": {"status": "consented"}, "area_id": "MOD:area-p0zsm8zca8"}
{"id": "REQT-8qbbvqg5kq", "reqt_id": "REQT-8qbbvqg5kq", "mod_id": "MOD-0rndkpc314", "type": "requirement", "outline": "7.2.2", "title": "Indivisible Primary Tokens", "statement": "Activation MUST fail if `primaryAssetTargetCount` is not evenly divisible by lot count, or if deposited primary tokens aren't evenly divisible.", "parent_reqt": "REQT-mgpyjxrhhw", "impl_status": "COMPLETED", "added_in": "1.0", "maturity": {"status": "consented"}, "area_id": "MOD:area-p0zsm8zca8"}
{"id": "REQT-g0638e8rje", "reqt_id": "REQT-g0638e8rje", "mod_id": "MOD-0rndkpc314", "type": "requirement", "outline": "7.2.3", "title": "Indivisible Non-Primary Tokens", "statement": "Activation MUST fail if deposited non-primary tokens aren't evenly divisible by lot count.", "parent_reqt": "REQT-mgpyjxrhhw", "impl_status": "COMPLETED", "added_in": "1.0", "maturity": {"status": "consented"}, "area_id": "MOD:area-p0zsm8zca8"}
{"id": "REQT-0sa1x0aj4z", "reqt_id": "REQT-0sa1x0aj4z", "mod_id": "MOD-0rndkpc314", "type": "requirement", "outline": "7.2.4", "title": "Invalid VXF Destination", "statement": "Activation MUST fail if `vxfFundsTo` doesn't validate or is missing.", "parent_reqt": "REQT-mgpyjxrhhw", "impl_status": "COMPLETED", "added_in": "1.0", "needs": ["REQT-x3xkgwp94t"], "maturity": {"status": "consented"}, "area_id": "MOD:area-p0zsm8zca8"}
{"id": "REQT-dn7s46r8qc", "reqt_id": "REQT-dn7s46r8qc", "mod_id": "MOD-0rndkpc314", "type": "requirement", "outline": "8.0", "title": "Sale Progress & Dynamic Pricing", "purpose": "Governs progress tracking and the DynamicSaleV1 pricing model. Applied when reviewing how sale progress is recorded, how pricing adjusts in response to pace, or when modifying pricing parameters (including while Paused). Key context for understanding the pricing impact of pausing — see REQT-fx7m3y1ctf (Active → Paused) and advisory notes in the work unit.", "functional": "Each sale tracks progress (lots sold, timestamps, pace) and uses a dynamic pricing model that adjusts prices based on overall progress pace and short-term buying dynamics — with configurable discounts, floors, and ceilings", "impl_status": "COMPLETED", "added_in": "1.0", "maturity": {"status": "consented"}, "area_id": "MOD:area-m4actb5psx"}
{"id": "REQT-jxfes3k49y", "reqt_id": "REQT-jxfes3k49y", "mod_id": "MOD-0rndkpc314", "type": "requirement", "outline": "8.1.0", "title": "Progress Detail Updates", "purpose": "Specifies how SaleProgressDetailsV1 fields are updated after each sale. Applied when reviewing or testing the SellingTokens progress update logic.", "parent_reqt": "REQT-dn7s46r8qc", "impl_status": "COMPLETED", "added_in": "1.0", "maturity": {"status": "consented"}, "area_id": "MOD:area-m4actb5psx"}
{"id": "REQT-zh5wt22z3z", "reqt_id": "REQT-zh5wt22z3z", "mod_id": "MOD-0rndkpc314", "type": "requirement", "outline": "8.1.1", "title": "Lots Sold Increment", "statement": "After a sale, `lotsSold` MUST equal `previous.lotsSold + lotsPurchased`.", "parent_reqt": "REQT-jxfes3k49y", "impl_status": "COMPLETED", "added_in": "1.0", "maturity": {"status": "consented"}, "area_id": "MOD:area-m4actb5psx"}
{"id": "REQT-jv32bcphjc", "reqt_id": "REQT-jv32bcphjc", "mod_id": "MOD-0rndkpc314", "type": "requirement", "outline": "8.1.2", "title": "Timestamp Rotation", "statement": "After a sale, `lastPurchaseAt` MUST be set to the current time range start, and `prevPurchaseAt` MUST be set to the previous `lastPurchaseAt`.", "parent_reqt": "REQT-jxfes3k49y", "impl_status": "COMPLETED", "added_in": "1.0", "maturity": {"status": "consented"}, "area_id": "MOD:area-m4actb5psx"}
{"id": "REQT-ea0ty9p998", "reqt_id": "REQT-ea0ty9p998", "mod_id": "MOD-0rndkpc314", "type": "requirement", "outline": "8.1.3", "title": "Lot Count Unchanged", "statement": "After a sale, `lotCount` MUST remain unchanged from the previous value.", "parent_reqt": "REQT-jxfes3k49y", "impl_status": "COMPLETED", "added_in": "1.0", "maturity": {"status": "consented"}, "area_id": "MOD:area-m4actb5psx"}
{"id": "REQT-w0pdvs7e7e", "reqt_id": "REQT-w0pdvs7e7e", "mod_id": "MOD-0rndkpc314", "type": "requirement", "outline": "8.1.4", "title": "Settings and Lot Counts Immutable During Sale", "statement": "SellingTokens MUST reject any change to `settings` or lot-count fields — only progress details and pace may update.", "parent_reqt": "REQT-jxfes3k49y", "impl_status": "COMPLETED", "added_in": "1.0", "maturity": {"status": "consented"}, "area_id": "MOD:area-m4actb5psx"}
{"id": "REQT-6phpvpm67w", "reqt_id": "REQT-6phpvpm67w", "mod_id": "MOD-0rndkpc314", "type": "requirement", "outline": "8.2.0", "title": "Dynamic Pace Tracking", "purpose": "Specifies how the sale's dynamic pace (salePace) is computed and validated. Applied when reviewing pricing calculations or testing pace updates.", "parent_reqt": "REQT-dn7s46r8qc", "impl_status": "COMPLETED", "added_in": "1.0", "maturity": {"status": "consented"}, "area_id": "MOD:area-m4actb5psx"}
{"id": "REQT-1eevay82t3", "reqt_id": "REQT-1eevay82t3", "mod_id": "MOD-0rndkpc314", "type": "requirement", "outline": "8.2.1", "title": "Pace Update on Sale", "statement": "After each sale, `salePace` MUST be updated to reflect the new dynamic pace as computed by the DynamicSaleV1 pricing strategy.", "parent_reqt": "REQT-6phpvpm67w", "impl_status": "COMPLETED", "added_in": "1.0", "maturity": {"status": "consented"}, "area_id": "MOD:area-m4actb5psx"}
{"id": "REQT-rabdpg7hjk", "reqt_id": "REQT-rabdpg7hjk", "mod_id": "MOD-0rndkpc314", "type": "requirement", "outline": "8.2.2", "title": "Incorrect Pace Rejected", "statement": "SellingTokens MUST reject transactions where the next `salePace` doesn't match the pricing strategy's computed value.", "parent_reqt": "REQT-6phpvpm67w", "impl_status": "COMPLETED", "added_in": "1.0", "maturity": {"status": "consented"}, "area_id": "MOD:area-m4actb5psx"}
{"id": "REQT-xwyp5rq40j", "reqt_id": "REQT-xwyp5rq40j", "mod_id": "MOD-0rndkpc314", "type": "requirement", "outline": "8.3.0", "title": "Pricing Model Validation", "purpose": "Specifies on-chain enforcement of the DynamicSaleV1 pricing model. Applied when reviewing payment verification or testing pricing correctness.", "functional": "The on-chain policy verifies that the sale price matches the dynamic pricing model's output — buyers pay the correct price based on overall progress pace and short-term buying dynamics", "parent_reqt": "REQT-dn7s46r8qc", "impl_status": "COMPLETED", "added_in": "1.0", "maturity": {"status": "consented"}, "area_id": "MOD:area-m4actb5psx"}
{"id": "REQT-jdkhmeg463", "reqt_id": "REQT-jdkhmeg463", "mod_id": "MOD-0rndkpc314", "type": "requirement", "outline": "8.3.1", "title": "Payment Matches Pricing Strategy", "statement": "SellingTokens MUST verify that the payment (paidValue) matches `lotSellPrice × lotsPurchased` as determined by the DynamicSaleV1 pricing strategy.", "parent_reqt": "REQT-xwyp5rq40j", "impl_status": "COMPLETED", "added_in": "1.0", "maturity": {"status": "consented"}, "area_id": "MOD:area-m4actb5psx"}
{"id": "REQT-yrw1e9vjdc", "reqt_id": "REQT-yrw1e9vjdc", "mod_id": "MOD-0rndkpc314", "type": "requirement", "outline": "8.3.2", "title": "Pricing Strategy Validates Updated Details", "statement": "The pricing strategy MUST validate that the updated sale details (pace, progress) are consistent with its own computations via `validateUpdatedDetails()`.", "parent_reqt": "REQT-xwyp5rq40j", "impl_status": "COMPLETED", "added_in": "1.0", "maturity": {"status": "consented"}, "area_id": "MOD:area-m4actb5psx"}
{"id": "REQT-eqd2j44phf", "reqt_id": "REQT-eqd2j44phf", "mod_id": "MOD-0rndkpc314", "type": "requirement", "outline": "8.4.0", "title": "Settings Editability While Paused", "purpose": "Specifies that pricing settings are editable during the Paused state, enabling administrators to adjust pricing before resuming. Applied when reviewing UpdatingPausedSale validation.", "functional": "While paused, pricing parameters (targetPrice, targetedSellingTime, minPrice, maxPrice, pace/discount knobs) can be adjusted with bounds validation — the designed governance lever for managing pricing impact of pause duration", "parent_reqt": "REQT-dn7s46r8qc", "impl_status": "NEXT", "added_in": "2.0", "maturity": {"status": "draft"}, "area_id": "MOD:area-m4actb5psx"}
{"id": "REQT-b731sye0fz", "reqt_id": "REQT-b731sye0fz", "mod_id": "MOD-0rndkpc314", "type": "requirement", "outline": "8.4.1", "title": "Settings Bounds Validation When Paused", "statement": "Updated `settings` while Paused MUST pass the same bounds validation as when Pending — `validateDetailsWhenPending()` applies (the function name is misleading; the checks are state-independent sane bounds).", "parent_reqt": "REQT-eqd2j44phf", "impl_status": "NEXT", "added_in": "2.0", "needs": ["REQT-5x71zzdpgb"], "maturity": {"status": "draft"}, "area_id": "MOD:area-m4actb5psx"}
{"id": "REQT-09dszn7mjs", "reqt_id": "REQT-09dszn7mjs", "mod_id": "MOD-0rndkpc314", "type": "requirement", "outline": "9.0", "title": "Token Selling", "purpose": "Governs the SellingTokens spending activity for executing token purchases. Applied when reviewing sale execution logic, state constraints, purchase limits, or payment verification. Depends on REQT-dn7s46r8qc (Progress & Pricing) for pricing validation and REQT-ywj3w9avvc (VXF Protocol) for payment routing.", "functional": "Buyers purchase lots from an Active sale — the policy enforces state, timing, quantity limits, correct pricing, progress updates, and (once implemented) VXF-compliant payment routing", "impl_status": "COMPLETED", "added_in": "1.0", "maturity": {"status": "consented"}, "area_id": "MOD:area-gxhv1xyf6c"}
{"id": "REQT-83a2cgn3m2", "reqt_id": "REQT-83a2cgn3m2", "mod_id": "MOD-0rndkpc314", "type": "requirement", "outline": "9.1.0", "title": "SellingTokens Activity", "purpose": "Specifies the on-chain validation for the SellingTokens spending activity. Applied when implementing or testing token sales.", "parent_reqt": "REQT-09dszn7mjs", "impl_status": "COMPLETED", "added_in": "1.0", "maturity": {"status": "consented"}, "area_id": "MOD:area-gxhv1xyf6c"}
{"id": "REQT-jarm09zdxx", "reqt_id": "REQT-jarm09zdxx", "mod_id": "MOD-0rndkpc314", "type": "requirement", "outline": "9.1.1", "title": "Active State Required", "statement": "SellingTokens MUST require both previous and next state to be Active. Sales MUST NOT execute from Pending, Paused, Retired, or SoldOut states.", "parent_reqt": "REQT-83a2cgn3m2", "impl_status": "COMPLETED", "added_in": "1.0", "needs": ["REQT-jdepn901ag"], "maturity": {"status": "consented"}, "area_id": "MOD:area-gxhv1xyf6c"}
{"id": "REQT-p387p68119", "reqt_id": "REQT-p387p68119", "mod_id": "MOD-0rndkpc314", "type": "requirement", "outline": "9.1.2", "title": "After Start Date", "statement": "SellingTokens MUST reject transactions where the current time range is before `startAt`.", "parent_reqt": "REQT-83a2cgn3m2", "impl_status": "COMPLETED", "added_in": "1.0", "maturity": {"status": "consented"}, "area_id": "MOD:area-gxhv1xyf6c"}
{"id": "REQT-9fxj7tm96b", "reqt_id": "REQT-9fxj7tm96b", "mod_id": "MOD-0rndkpc314", "type": "requirement", "outline": "9.1.3", "title": "Purchase Quantity Limits", "statement": "SellingTokens MUST require `lotsPurchased > 0` and `lotsPurchased <= singleBuyMaxLots`.", "parent_reqt": "REQT-83a2cgn3m2", "impl_status": "COMPLETED", "added_in": "1.0", "maturity": {"status": "consented"}, "area_id": "MOD:area-gxhv1xyf6c"}
{"id": "REQT-en9bvp16ds", "reqt_id": "REQT-en9bvp16ds", "mod_id": "MOD-0rndkpc314", "type": "requirement", "outline": "9.1.4", "title": "Progress Update Validation", "statement": "SellingTokens MUST validate that progress details are correctly updated per REQT-jxfes3k49y (Progress Detail Updates).", "parent_reqt": "REQT-83a2cgn3m2", "impl_status": "COMPLETED", "added_in": "1.0", "needs": ["REQT-jxfes3k49y"], "maturity": {"status": "consented"}, "area_id": "MOD:area-gxhv1xyf6c"}
{"id": "REQT-fkekrst2w6", "reqt_id": "REQT-fkekrst2w6", "mod_id": "MOD-0rndkpc314", "type": "requirement", "outline": "9.1.5", "title": "Pricing Validation", "statement": "SellingTokens MUST validate pricing per REQT-xwyp5rq40j (Pricing Model Validation) — payment must match the pricing strategy's computed price.", "parent_reqt": "REQT-83a2cgn3m2", "impl_status": "COMPLETED", "added_in": "1.0", "needs": ["REQT-xwyp5rq40j"], "maturity": {"status": "consented"}, "area_id": "MOD:area-gxhv1xyf6c"}
{"id": "REQT-8wtgfdn4tv", "reqt_id": "REQT-8wtgfdn4tv", "mod_id": "MOD-0rndkpc314", "type": "requirement", "outline": "9.1.6", "title": "Redeemer Payment Match", "statement": "SellingTokens MUST verify that the actual payment (derived from UTxO value changes) matches `lotSellPrice × lotsPurchased` as declared in the redeemer.", "parent_reqt": "REQT-83a2cgn3m2", "impl_status": "COMPLETED", "added_in": "1.0", "maturity": {"status": "consented"}, "area_id": "MOD:area-gxhv1xyf6c"}
{"id": "REQT-0g9sfw5zg3", "reqt_id": "REQT-0g9sfw5zg3", "mod_id": "MOD-0rndkpc314", "type": "requirement", "outline": "9.2.0", "title": "Chunk Maturity Guard", "purpose": "Specifies the timing constraint on selling from recently-split chunks. Applied when reviewing chunk-based selling or testing the maturity window.", "parent_reqt": "REQT-09dszn7mjs", "impl_status": "COMPLETED", "added_in": "1.0", "maturity": {"status": "consented"}, "area_id": "MOD:area-gxhv1xyf6c"}
{"id": "REQT-8sg001m18m", "reqt_id": "REQT-8sg001m18m", "mod_id": "MOD-0rndkpc314", "type": "requirement", "outline": "9.2.1", "title": "10-Minute Maturity Window", "statement": "SellingTokens MUST reject sales from a chunk that is less than 10 minutes old (based on `chunkForkedAt`).", "parent_reqt": "REQT-0g9sfw5zg3", "impl_status": "COMPLETED", "added_in": "1.0", "maturity": {"status": "consented"}, "area_id": "MOD:area-gxhv1xyf6c"}
{"id": "REQT-89qspbx64j", "reqt_id": "REQT-89qspbx64j", "mod_id": "MOD-0rndkpc314", "type": "requirement", "outline": "9.3.0", "title": "Child Chunk Selling While Root Paused", "purpose": "Specifies that child chunks must not sell while the root sale is Paused. Applied when implementing chunk-splitting and reviewing the Paused-state implications on child chunks.", "functional": "When chunk-splitting is implemented, Stopping the root sale effectively halts selling across all chunks — child chunks cannot sell independently while the root is Paused", "parent_reqt": "REQT-09dszn7mjs", "impl_status": "FUTURE", "added_in": "2.0", "maturity": {"status": "draft"}, "area_id": "MOD:area-gxhv1xyf6c"}
{"id": "REQT-5gmjkmqfrw", "reqt_id": "REQT-5gmjkmqfrw", "mod_id": "MOD-0rndkpc314", "type": "requirement", "outline": "9.3.1", "title": "Root State Check for Child Sales", "statement": "When chunk-splitting is implemented, `SellingTokens` on a child chunk MUST require the root sale's UTxO as a reference input and MUST verify the root's state is Active.", "parent_reqt": "REQT-89qspbx64j", "impl_status": "FUTURE", "added_in": "2.0", "needs": ["REQT-jdepn901ag"], "maturity": {"status": "draft"}, "area_id": "MOD:area-gxhv1xyf6c"}
{"id": "REQT-05fzh7rd1q", "reqt_id": "REQT-05fzh7rd1q", "mod_id": "MOD-0rndkpc314", "type": "requirement", "outline": "10.0", "title": "Paused Sale Management", "purpose": "Governs the Stopping, Resuming, and UpdatingPausedSale activities for managing a sale in the Paused state. Applied when reviewing pause/resume lifecycle, frozen/editable field inventory, or testing Paused-state mutations. See REQT-ywj3w9avvc (VXF Protocol) for VXF validation during paused updates and resuming.", "functional": "An Active sale can be temporarily stopped (paused) for configuration changes, then resumed or permanently retired. While paused, certain fields can be edited (name, pricing settings, VXF destinations) while others are frozen (state, progress, assets, startAt, threadInfo)", "impl_status": "NEXT", "added_in": "2.0", "maturity": {"status": "draft"}, "area_id": "MOD:area-avths4ptbg"}
{"id": "REQT-03ff0mfddc", "reqt_id": "REQT-03ff0mfddc", "mod_id": "MOD-0rndkpc314", "type": "requirement", "outline": "10.1.0", "title": "Stopping Activity", "purpose": "Specifies the on-chain validation for the Stopping spending activity (Active → Paused). Applied when implementing or testing the stop action.", "parent_reqt": "REQT-05fzh7rd1q", "impl_status": "NEXT", "added_in": "2.0", "maturity": {"status": "draft"}, "area_id": "MOD:area-avths4ptbg"}
{"id": "REQT-f12d51rvdz", "reqt_id": "REQT-f12d51rvdz", "mod_id": "MOD-0rndkpc314", "type": "requirement", "outline": "10.1.1", "title": "State Transition", "statement": "Stopping MUST require previous state == Active and next state == Paused.", "parent_reqt": "REQT-03ff0mfddc", "impl_status": "NEXT", "added_in": "2.0", "needs": ["REQT-fx7m3y1ctf"], "maturity": {"status": "draft"}, "area_id": "MOD:area-avths4ptbg"}
{"id": "REQT-mfpstpdjsp", "reqt_id": "REQT-mfpstpdjsp", "mod_id": "MOD-0rndkpc314", "type": "requirement", "outline": "10.1.2", "title": "Gov Authority", "statement": "Stopping MUST require governance authority.", "parent_reqt": "REQT-03ff0mfddc", "impl_status": "NEXT", "added_in": "2.0", "maturity": {"status": "draft"}, "area_id": "MOD:area-avths4ptbg"}
{"id": "REQT-nxqq219k4r", "reqt_id": "REQT-nxqq219k4r", "mod_id": "MOD-0rndkpc314", "type": "requirement", "outline": "10.1.3", "title": "All Fields Unchanged", "statement": "Stopping MUST verify all datum fields are unchanged except for the state field transition from Active to Paused.", "parent_reqt": "REQT-03ff0mfddc", "impl_status": "NEXT", "added_in": "2.0", "maturity": {"status": "draft"}, "area_id": "MOD:area-avths4ptbg"}
{"id": "REQT-tx3fyv3eb2", "reqt_id": "REQT-tx3fyv3eb2", "mod_id": "MOD-0rndkpc314", "type": "requirement", "outline": "10.1.4", "title": "UTxO Value Unchanged", "statement": "Stopping MUST verify the UTxO token value does not change — no token movement during a stop.", "parent_reqt": "REQT-03ff0mfddc", "impl_status": "NEXT", "added_in": "2.0", "maturity": {"status": "draft"}, "area_id": "MOD:area-avths4ptbg"}
{"id": "REQT-qh3qkk8f92", "reqt_id": "REQT-qh3qkk8f92", "mod_id": "MOD-0rndkpc314", "type": "requirement", "outline": "10.2.0", "title": "Resuming Activity", "purpose": "Specifies the on-chain validation for the Resuming spending activity (Paused → Active). Applied when implementing or testing the resume action. Distinct from Activating — Resuming confirms tokens are already present rather than verifying an initial deposit.", "parent_reqt": "REQT-05fzh7rd1q", "impl_status": "NEXT", "added_in": "2.0", "maturity": {"status": "draft"}, "area_id": "MOD:area-avths4ptbg"}
{"id": "REQT-dpkz9kmr81", "reqt_id": "REQT-dpkz9kmr81", "mod_id": "MOD-0rndkpc314", "type": "requirement", "outline": "10.2.1", "title": "State Transition", "statement": "Resuming MUST require previous state == Paused and next state == Active.", "parent_reqt": "REQT-qh3qkk8f92", "impl_status": "NEXT", "added_in": "2.0", "needs": ["REQT-3h96mdmn5k"], "maturity": {"status": "draft"}, "area_id": "MOD:area-avths4ptbg"}
{"id": "REQT-pks8phr4y5", "reqt_id": "REQT-pks8phr4y5", "mod_id": "MOD-0rndkpc314", "type": "requirement", "outline": "10.2.2", "title": "Gov Authority", "statement": "Resuming MUST require governance authority.", "parent_reqt": "REQT-qh3qkk8f92", "impl_status": "NEXT", "added_in": "2.0", "maturity": {"status": "draft"}, "area_id": "MOD:area-avths4ptbg"}
{"id": "REQT-34yb7jx6tr", "reqt_id": "REQT-34yb7jx6tr", "mod_id": "MOD-0rndkpc314", "type": "requirement", "outline": "10.2.3", "title": "Token Presence Verification", "statement": "Resuming MUST verify that deposited tokens still match `saleLotAssets × totalSaleLots` — the full supply must still be present.", "parent_reqt": "REQT-qh3qkk8f92", "impl_status": "NEXT", "added_in": "2.0", "maturity": {"status": "draft"}, "area_id": "MOD:area-avths4ptbg"}
{"id": "REQT-pypc9vmpfk", "reqt_id": "REQT-pypc9vmpfk", "mod_id": "MOD-0rndkpc314", "type": "requirement", "outline": "10.2.4", "title": "VXF Validation on Resume", "statement": "Resuming MUST validate VXF destinations per REQT-jkbaba8n7n (Resuming Validates VXF) — same checks as Activating since the sale re-enters Active state.", "parent_reqt": "REQT-qh3qkk8f92", "impl_status": "NEXT", "added_in": "2.0", "needs": ["REQT-jkbaba8n7n"], "maturity": {"status": "draft"}, "area_id": "MOD:area-avths4ptbg"}
{"id": "REQT-fkww59zyt3", "reqt_id": "REQT-fkww59zyt3", "mod_id": "MOD-0rndkpc314", "type": "requirement", "outline": "10.2.5", "title": "General Validation Passes on Resume", "statement": "The resumed record MUST pass `validate()` — defense-in-depth ensuring datum integrity when re-entering Active state, mirroring Activating (REQT-wt32kvjm9f).", "parent_reqt": "REQT-qh3qkk8f92", "impl_status": "NEXT", "added_in": "2.0", "needs": ["REQT-bk56aq15zn"], "maturity": {"status": "draft"}, "area_id": "MOD:area-avths4ptbg"}
{"id": "REQT-60azhtn9dy", "reqt_id": "REQT-60azhtn9dy", "mod_id": "MOD-0rndkpc314", "type": "requirement", "outline": "10.2.6", "title": "Non-Editable Fields Unchanged on Resume", "statement": "Resuming MUST verify that all fields not editable during UpdatingPausedSale are unchanged from input to output: saleAssets (entire struct), startAt, progressDetails (all four fields), threadInfo, salePace, id, type. Only the state field transitions from Paused to Active.", "parent_reqt": "REQT-qh3qkk8f92", "impl_status": "NEXT", "added_in": "2.0", "needs": ["REQT-xygjysee4h"], "maturity": {"status": "draft"}, "area_id": "MOD:area-avths4ptbg"}
{"id": "REQT-b30wn4bdw2", "reqt_id": "REQT-b30wn4bdw2", "mod_id": "MOD-0rndkpc314", "type": "requirement", "outline": "10.3.0", "title": "UpdatingPausedSale Activity", "purpose": "Specifies the on-chain validation for the UpdatingPausedSale spending activity. Applied when implementing or testing paused-state edits. This is a separate activity from UpdatingPendingSale because the frozen/editable field inventory differs — a Paused sale has real progress history that must be preserved.", "parent_reqt": "REQT-05fzh7rd1q", "impl_status": "NEXT", "added_in": "2.0", "maturity": {"status": "draft"}, "area_id": "MOD:area-avths4ptbg"}
{"id": "REQT-krpj42awmt", "reqt_id": "REQT-krpj42awmt", "mod_id": "MOD-0rndkpc314", "type": "requirement", "outline": "10.3.1", "title": "Paused State Required", "statement": "UpdatingPausedSale MUST require both previous and next state to be Paused.", "parent_reqt": "REQT-b30wn4bdw2", "impl_status": "NEXT", "added_in": "2.0", "maturity": {"status": "draft"}, "area_id": "MOD:area-avths4ptbg"}
{"id": "REQT-4svc8tfffy", "reqt_id": "REQT-4svc8tfffy", "mod_id": "MOD-0rndkpc314", "type": "requirement", "outline": "10.3.2", "title": "Gov Authority", "statement": "UpdatingPausedSale MUST require governance authority.", "parent_reqt": "REQT-b30wn4bdw2", "impl_status": "NEXT", "added_in": "2.0", "maturity": {"status": "draft"}, "area_id": "MOD:area-avths4ptbg"}
{"id": "REQT-ntdbhc1xss", "reqt_id": "REQT-ntdbhc1xss", "mod_id": "MOD-0rndkpc314", "type": "requirement", "outline": "10.3.3", "title": "UTxO Value Unchanged", "statement": "UpdatingPausedSale MUST verify the UTxO token value does not change — no token movement during edits.", "parent_reqt": "REQT-b30wn4bdw2", "impl_status": "NEXT", "added_in": "2.0", "maturity": {"status": "draft"}, "area_id": "MOD:area-avths4ptbg"}
{"id": "REQT-xygjysee4h", "reqt_id": "REQT-xygjysee4h", "mod_id": "MOD-0rndkpc314", "type": "requirement", "outline": "10.4.0", "title": "Frozen Fields While Paused", "purpose": "Specifies which fields MUST NOT change during UpdatingPausedSale. Applied when implementing the validation or testing frozen-field enforcement.", "functional": "While paused, state, salePace, all progressDetails, entire saleAssets struct, startAt, threadInfo, id, type, and UTxO token value are frozen — preserving real market history and deposited token integrity", "parent_reqt": "REQT-05fzh7rd1q", "impl_status": "NEXT", "added_in": "2.0", "maturity": {"status": "draft"}, "area_id": "MOD:area-avths4ptbg"}
{"id": "REQT-drdfrj7k96", "reqt_id": "REQT-drdfrj7k96", "mod_id": "MOD-0rndkpc314", "type": "requirement", "outline": "10.4.1", "title": "Sale Pace Carried Forward", "statement": "`salePace` MUST equal previous — carry forward the real dynamic pace, don't reset to 1.0.", "parent_reqt": "REQT-xygjysee4h", "impl_status": "NEXT", "added_in": "2.0", "maturity": {"status": "draft"}, "area_id": "MOD:area-avths4ptbg"}
{"id": "REQT-r20vvfdq05", "reqt_id": "REQT-r20vvfdq05", "mod_id": "MOD-0rndkpc314", "type": "requirement", "outline": "10.4.2", "title": "Progress Details Frozen", "statement": "All four progress detail fields MUST equal previous: `lotsSold`, `lastPurchaseAt`, `prevPurchaseAt`, `lotCount`. Requires a new `validateDetailsWhenPaused()` function.", "parent_reqt": "REQT-xygjysee4h", "impl_status": "NEXT", "added_in": "2.0", "maturity": {"status": "draft"}, "area_id": "MOD:area-avths4ptbg"}
{"id": "REQT-9eeh66pcnw", "reqt_id": "REQT-9eeh66pcnw", "mod_id": "MOD-0rndkpc314", "type": "requirement", "outline": "10.4.3", "title": "SaleAssets Entire Struct Frozen", "statement": "The entire `saleAssets` struct MUST equal previous — `saleLotAssets`, `totalSaleLots`, `singleBuyMaxLots`, `primaryAssetMph`, `primaryAssetName`, `primaryAssetTargetCount` are all immutable while paused. The struct is entangled with deposited tokens and purchase history.", "parent_reqt": "REQT-xygjysee4h", "impl_status": "NEXT", "added_in": "2.0", "maturity": {"status": "draft"}, "area_id": "MOD:area-avths4ptbg"}
{"id": "REQT-q5wwj273n4", "reqt_id": "REQT-q5wwj273n4", "mod_id": "MOD-0rndkpc314", "type": "requirement", "outline": "10.4.4", "title": "StartAt Frozen", "statement": "`startAt` MUST equal previous — it's the time anchor for all pacing/pricing calculations. Moving it forward would corrupt `elapsedSaleHours`.", "parent_reqt": "REQT-xygjysee4h", "impl_status": "NEXT", "added_in": "2.0", "maturity": {"status": "draft"}, "area_id": "MOD:area-avths4ptbg"}
{"id": "REQT-rg5zyhd2gb", "reqt_id": "REQT-rg5zyhd2gb", "mod_id": "MOD-0rndkpc314", "type": "requirement", "outline": "10.4.5", "title": "ThreadInfo Frozen", "statement": "`threadInfo` MUST equal previous — frozen by equality (strictly stronger than structural re-validation).", "parent_reqt": "REQT-xygjysee4h", "impl_status": "NEXT", "added_in": "2.0", "maturity": {"status": "draft"}, "area_id": "MOD:area-avths4ptbg"}
{"id": "REQT-d1967hd11e", "reqt_id": "REQT-d1967hd11e", "mod_id": "MOD-0rndkpc314", "type": "requirement", "outline": "10.5.0", "title": "Editable Fields While Paused", "purpose": "Specifies which fields MAY be changed during UpdatingPausedSale and what validation applies. Applied when implementing the edit path or testing editable fields.", "functional": "While paused, administrators can adjust the sale name, pricing settings (with bounds validation), and VXF destinations (with validation if present)", "parent_reqt": "REQT-05fzh7rd1q", "impl_status": "NEXT", "added_in": "2.0", "maturity": {"status": "draft"}, "area_id": "MOD:area-avths4ptbg"}
{"id": "REQT-40n867ecfx", "reqt_id": "REQT-40n867ecfx", "mod_id": "MOD-0rndkpc314", "type": "requirement", "outline": "10.5.1", "title": "Name Editable", "statement": "`name` MAY be changed while Paused. MUST still be at least 10 characters (via `validate()`).", "parent_reqt": "REQT-d1967hd11e", "impl_status": "NEXT", "added_in": "2.0", "needs": ["REQT-y16j4t955c"], "maturity": {"status": "draft"}, "area_id": "MOD:area-avths4ptbg"}
{"id": "REQT-v8t41enngd", "reqt_id": "REQT-v8t41enngd", "mod_id": "MOD-0rndkpc314", "type": "requirement", "outline": "10.5.2", "title": "Settings Editable", "statement": "`fixedSaleDetails.settings` MAY be changed while Paused — all pricing parameters (targetPrice, targetedSellingTime, minPrice, maxPrice, pace/discount knobs) are editable with bounds validation per REQT-b731sye0fz.", "parent_reqt": "REQT-d1967hd11e", "impl_status": "NEXT", "added_in": "2.0", "needs": ["REQT-b731sye0fz"], "maturity": {"status": "draft"}, "area_id": "MOD:area-avths4ptbg"}
{"id": "REQT-917pgbgfpf", "reqt_id": "REQT-917pgbgfpf", "mod_id": "MOD-0rndkpc314", "type": "requirement", "outline": "10.5.3", "title": "VXF Destinations Editable", "statement": "`vxfTokensTo` and `vxfFundsTo` MAY be changed while Paused, with validation if present per REQT-6z88fg6j2s.", "parent_reqt": "REQT-d1967hd11e", "impl_status": "NEXT", "added_in": "2.0", "needs": ["REQT-6z88fg6j2s"], "maturity": {"status": "draft"}, "area_id": "MOD:area-avths4ptbg"}
{"id": "REQT-h6wqgc7fat", "reqt_id": "REQT-h6wqgc7fat", "mod_id": "MOD-0rndkpc314", "type": "requirement", "outline": "11.0", "title": "Sale Retirement", "purpose": "Governs the Retiring spending activity for permanently winding down a Paused sale. Applied when reviewing the retirement flow, token withdrawal/burning, or testing the Paused → Retired transition.", "functional": "A paused sale can be permanently retired, transitioning to the Retired state with token withdrawal and burning. Direct Active → Retired is not supported — the sale must be Stopped first, making Paused the deliberation state.", "impl_status": "NEXT", "added_in": "2.0", "maturity": {"status": "draft"}, "area_id": "MOD:area-qmwgk20pp6"}
{"id": "REQT-6kg1f7h500", "reqt_id": "REQT-6kg1f7h500", "mod_id": "MOD-0rndkpc314", "type": "requirement", "outline": "11.1.0", "title": "Retiring Activity", "purpose": "Specifies the on-chain validation for the Retiring spending activity. Applied when implementing or testing sale retirement.", "parent_reqt": "REQT-h6wqgc7fat", "impl_status": "NEXT", "added_in": "2.0", "maturity": {"status": "draft"}, "area_id": "MOD:area-qmwgk20pp6"}
{"id": "REQT-6fb1gwxhvk", "reqt_id": "REQT-6fb1gwxhvk", "mod_id": "MOD-0rndkpc314", "type": "requirement", "outline": "11.1.1", "title": "State Transition", "statement": "Retiring MUST require previous state == Paused and next state == Retired.", "parent_reqt": "REQT-6kg1f7h500", "impl_status": "NEXT", "added_in": "2.0", "needs": ["REQT-hcagxtdt35"], "maturity": {"status": "draft"}, "area_id": "MOD:area-qmwgk20pp6"}
{"id": "REQT-3fhy62nx77", "reqt_id": "REQT-3fhy62nx77", "mod_id": "MOD-0rndkpc314", "type": "requirement", "outline": "11.1.2", "title": "Gov Authority", "statement": "Retiring MUST require governance authority.", "parent_reqt": "REQT-6kg1f7h500", "impl_status": "NEXT", "added_in": "2.0", "maturity": {"status": "draft"}, "area_id": "MOD:area-qmwgk20pp6"}
{"id": "REQT-je621r06f7", "reqt_id": "REQT-je621r06f7", "mod_id": "MOD-0rndkpc314", "type": "requirement", "outline": "11.1.3", "title": "Token Withdrawal", "statement": "Retiring MUST handle withdrawal/burning of remaining tokens from the sale UTxO. Specific mechanism to be further specified during implementation.", "parent_reqt": "REQT-6kg1f7h500", "impl_status": "NEXT", "added_in": "2.0", "maturity": {"status": "draft"}, "area_id": "MOD:area-qmwgk20pp6"}
{"id": "REQT-gexqz64w5d", "reqt_id": "REQT-gexqz64w5d", "mod_id": "MOD-0rndkpc314", "type": "requirement", "outline": "11.2.0", "title": "Broader Retirement (Future)", "purpose": "Captures future considerations for retirement beyond the initial Paused → Retired scope.", "parent_reqt": "REQT-h6wqgc7fat", "impl_status": "FUTURE", "added_in": "2.0", "maturity": {"status": "draft"}, "area_id": "MOD:area-qmwgk20pp6"}
{"id": "REQT-wvfhmzb0bf", "reqt_id": "REQT-wvfhmzb0bf", "mod_id": "MOD-0rndkpc314", "type": "requirement", "outline": "11.2.1", "title": "No Active Child Chunks on Retire", "statement": "When chunk-splitting is implemented, Retiring MUST verify that `retiredThreads == nestedThreads` — all child chunks must be merged/retired before the parent can retire.", "parent_reqt": "REQT-gexqz64w5d", "impl_status": "FUTURE", "added_in": "2.0", "maturity": {"status": "draft"}, "area_id": "MOD:area-qmwgk20pp6"}
{"id": "REQT-kr9rseqaxf", "reqt_id": "REQT-kr9rseqaxf", "mod_id": "MOD-0rndkpc314", "type": "requirement", "outline": "11.2.2", "title": "CleanupRetired Burning", "statement": "The `CleanupRetired` burning activity MUST burn the UUT and account for remaining tokens after retirement. Currently stubbed.", "parent_reqt": "REQT-gexqz64w5d", "impl_status": "FUTURE", "added_in": "1.0", "maturity": {"status": "draft"}, "area_id": "MOD:area-qmwgk20pp6"}
{"id": "REQT-gxpr7tjxy4", "reqt_id": "REQT-gxpr7tjxy4", "mod_id": "MOD-0rndkpc314", "type": "requirement", "outline": "12.0", "title": "Chunk Splitting & Scaling", "purpose": "Governs splitting sales into concurrent chunks for throughput scaling. Applied when implementing chunk operations or reviewing the parent/child coordination model. All activities in this area are currently stubbed.", "functional": "Sales can be split into smaller concurrent chunks to enable parallel selling — each chunk has its own UTxO and progress tracking, coordinated with the parent via thread counters and sale identity", "impl_status": "FUTURE", "added_in": "1.0", "maturity": {"status": "draft"}, "area_id": "MOD:area-cg50k1920c"}
{"id": "REQT-98ff9d2w1m", "reqt_id": "REQT-98ff9d2w1m", "mod_id": "MOD-0rndkpc314", "type": "requirement", "outline": "12.1.0", "title": "SplittingSaleChunkAndBuying", "purpose": "Specifies the minting activity for creating a child chunk while simultaneously buying from it. Currently stubbed with error().", "parent_reqt": "REQT-gxpr7tjxy4", "impl_status": "FUTURE", "added_in": "1.0", "maturity": {"status": "draft"}, "area_id": "MOD:area-cg50k1920c"}
{"id": "REQT-2w6sx6etad", "reqt_id": "REQT-2w6sx6etad", "mod_id": "MOD-0rndkpc314", "type": "requirement", "outline": "12.1.1", "title": "Parent Chunk Update", "statement": "Splitting MUST spend the parent chunk UTxO with a corresponding spending activity, incrementing `nestedThreads` and withdrawing the child's token allocation.", "parent_reqt": "REQT-98ff9d2w1m", "impl_status": "FUTURE", "added_in": "1.0", "maturity": {"status": "draft"}, "area_id": "MOD:area-cg50k1920c"}
{"id": "REQT-9h1y00c098", "reqt_id": "REQT-9h1y00c098", "mod_id": "MOD-0rndkpc314", "type": "requirement", "outline": "12.1.2", "title": "Child Chunk Identity", "statement": "The child chunk MUST have `saleId` pointing to the root sale, `parentChunkId` pointing to the parent chunk, and zero `nestedThreads`/`retiredThreads`.", "parent_reqt": "REQT-98ff9d2w1m", "impl_status": "FUTURE", "added_in": "1.0", "maturity": {"status": "draft"}, "area_id": "MOD:area-cg50k1920c"}
{"id": "REQT-fe7a2er1ec", "reqt_id": "REQT-fe7a2er1ec", "mod_id": "MOD-0rndkpc314", "type": "requirement", "outline": "12.1.3", "title": "Minimum Split Size", "statement": "Splitting MUST NOT create a child chunk smaller than a minimum sale size threshold.", "parent_reqt": "REQT-98ff9d2w1m", "impl_status": "FUTURE", "added_in": "1.0", "maturity": {"status": "draft"}, "area_id": "MOD:area-cg50k1920c"}
{"id": "REQT-e7cwtc9hxa", "reqt_id": "REQT-e7cwtc9hxa", "mod_id": "MOD-0rndkpc314", "type": "requirement", "outline": "12.1.4", "title": "Maturity Guard on Split Source", "statement": "Splitting MUST NOT split from a chunk that has aged into maturity (>10 minutes). Only immature chunks can be split.", "parent_reqt": "REQT-98ff9d2w1m", "impl_status": "FUTURE", "added_in": "1.0", "maturity": {"status": "draft"}, "area_id": "MOD:area-cg50k1920c"}
{"id": "REQT-w6jee3g0zx", "reqt_id": "REQT-w6jee3g0zx", "mod_id": "MOD-0rndkpc314", "type": "requirement", "outline": "12.2.0", "title": "MergingChildChunk", "purpose": "Specifies the spending activity for merging a child chunk back into its parent. Currently stubbed with error().", "parent_reqt": "REQT-gxpr7tjxy4", "impl_status": "FUTURE", "added_in": "1.0", "maturity": {"status": "draft"}, "area_id": "MOD:area-cg50k1920c"}
{"id": "REQT-5n5dn38npp", "reqt_id": "REQT-5n5dn38npp", "mod_id": "MOD-0rndkpc314", "type": "requirement", "outline": "12.2.1", "title": "Child Burn Required", "statement": "Merging MUST burn the child chunk's UUT via `JoiningWithParentChunk` burning activity.", "parent_reqt": "REQT-w6jee3g0zx", "impl_status": "FUTURE", "added_in": "1.0", "maturity": {"status": "draft"}, "area_id": "MOD:area-cg50k1920c"}
{"id": "REQT-ecb9p0vf2b", "reqt_id": "REQT-ecb9p0vf2b", "mod_id": "MOD-0rndkpc314", "type": "requirement", "outline": "12.2.2", "title": "Parent Thread Counter Update", "statement": "Merging MUST increment the parent's `retiredThreads` counter.", "parent_reqt": "REQT-w6jee3g0zx", "impl_status": "FUTURE", "added_in": "1.0", "maturity": {"status": "draft"}, "area_id": "MOD:area-cg50k1920c"}
{"id": "REQT-vjcyhre037", "reqt_id": "REQT-vjcyhre037", "mod_id": "MOD-0rndkpc314", "type": "requirement", "outline": "12.3.0", "title": "Max Sale Size", "purpose": "Specifies the constraint on maximum sale size. Applied when creating sales with large lot counts.", "parent_reqt": "REQT-gxpr7tjxy4", "impl_status": "COMPLETED", "added_in": "1.0", "maturity": {"status": "consented"}, "area_id": "MOD:area-cg50k1920c"}
{"id": "REQT-6sa3bf29pc", "reqt_id": "REQT-6sa3bf29pc", "mod_id": "MOD-0rndkpc314", "type": "requirement", "outline": "12.3.1", "title": "Sale Size Limit", "statement": "The sale MUST reject creation if the total sale size exceeds the maximum allowed size (enforced by transaction size or policy limits).", "parent_reqt": "REQT-vjcyhre037", "impl_status": "COMPLETED", "added_in": "1.0", "maturity": {"status": "consented"}, "area_id": "MOD:area-cg50k1920c"}
{"mod_id": "MOD-0rndkpc314", "type": "impl_log", "version": "0.8.0-beta.9", "action": "added", "summary": "Initial implementation of MarketSale creation, activation, selling, and chunk splitting stubs", "impl_notes": "Sale creation with key details, initial timestamps, price/lot configuration. State machine basics (Pending → Active). SellingTokens with pricing strategy. Chunk splitting and merging stubs. VXF protocol: no constraints on token distribution."}
{"mod_id": "MOD-0rndkpc314", "type": "impl_log", "version": "0.8.0-beta.10", "action": "added", "summary": "Added UpdatingPendingSale activity and enhanced AddTokens constraints", "impl_notes": "UpdatingPendingSale with frozen/editable field logic and primary asset change handling. AddTokens now enforces even lot distribution on deposit. Constrained saleLotAssets to primary-only on creation. Adjusted policies for expressing token bundle/lot contents."}
{"mod_id": "MOD-0rndkpc314", "type": "impl_log", "version": "0.8.0-beta.10", "action": "updated", "summary": "Enhanced primary asset change logic during pending updates", "reqt_id": "REQT-3x0fmfejw2", "impl_notes": "Complex branching for primary asset identity changes: if old tokens exist, maintain minimum lot sizes; if asset changes and no old tokens, remove references to old primary. Target count consistency enforcement added."}
{"mod_id": "MOD-0rndkpc314", "type": "impl_log", "version": "2.0", "action": "added", "summary": "Requirements formalization: MarketSale on-chain policy", "impl_notes": "First formal REQM v3 requirements document for MarketSale on-chain policy. Captured existing implementation as COMPLETED requirements, stubbed activities as FUTURE, and new Pause/Stop/Resume/Retire scope as NEXT. 12 functional areas in narrative lifecycle order."}
